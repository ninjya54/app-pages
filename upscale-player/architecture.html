<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UpscalePlayer ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</title>
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --bg-dark: #1e1e2e;
            --bg-card: #2a2a3e;
            --bg-light: #3a3a4e;
            --text: #e2e8f0;
            --text-muted: #94a3b8;
            --border: #4a4a5e;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-dark);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            border-radius: 16px;
            margin-bottom: 40px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        header p {
            opacity: 0.9;
            font-size: 1.2em;
        }

        .section {
            background: var(--bg-card);
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
        }

        .section h2 {
            color: var(--primary);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h2 .icon {
            font-size: 1.5em;
        }

        /* Flow Diagram */
        .flow-container {
            overflow-x: auto;
            padding: 20px 0;
        }

        .flow {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 800px;
            flex-wrap: wrap;
        }

        .flow-step {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            min-width: 140px;
            transition: transform 0.3s, box-shadow 0.3s;
            cursor: pointer;
        }

        .flow-step:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(99, 102, 241, 0.3);
        }

        .flow-step .icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .flow-step .label {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .flow-step .tech {
            font-size: 0.8em;
            color: var(--text-muted);
        }

        .flow-arrow {
            font-size: 1.5em;
            color: var(--accent);
        }

        /* Pipeline */
        .pipeline {
            position: relative;
            padding: 20px 0;
        }

        .pipeline-line {
            position: absolute;
            left: 30px;
            top: 0;
            bottom: 0;
            width: 4px;
            background: linear-gradient(to bottom, var(--primary), var(--secondary));
            border-radius: 2px;
        }

        .pipeline-step {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            position: relative;
        }

        .pipeline-number {
            width: 60px;
            height: 60px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            flex-shrink: 0;
            z-index: 1;
        }

        .pipeline-content {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 20px;
            margin-left: 20px;
            flex: 1;
        }

        .pipeline-content h3 {
            color: var(--secondary);
            margin-bottom: 10px;
        }

        /* Cards Grid */
        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .card {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 25px;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: scale(1.02);
        }

        .card h3 {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--accent);
        }

        .card .icon {
            font-size: 1.5em;
        }

        /* Code blocks */
        .code-block {
            background: #1a1a2e;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'SF Mono', Monaco, monospace;
            font-size: 0.9em;
        }

        .code-block .keyword { color: #c792ea; }
        .code-block .function { color: #82aaff; }
        .code-block .string { color: #c3e88d; }
        .code-block .comment { color: #676e95; }
        .code-block .type { color: #ffcb6b; }

        /* Table */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: var(--bg-light);
            color: var(--primary);
        }

        tr:hover {
            background: rgba(99, 102, 241, 0.1);
        }

        /* Filter Order Animation */
        .filter-chain {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            padding: 20px 0;
        }

        .filter-item {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            padding: 15px 25px;
            border-radius: 30px;
            font-weight: 600;
            animation: pulse 2s infinite;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .filter-item:hover {
            transform: scale(1.1);
        }

        .filter-item:nth-child(2) { animation-delay: 0.2s; }
        .filter-item:nth-child(3) { animation-delay: 0.4s; }
        .filter-item:nth-child(4) { animation-delay: 0.6s; }
        .filter-item:nth-child(5) { animation-delay: 0.8s; }
        .filter-item:nth-child(6) { animation-delay: 1.0s; }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .filter-arrow {
            display: flex;
            align-items: center;
            color: var(--accent);
            font-size: 1.5em;
        }

        /* Architecture Diagram */
        .arch-diagram {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .arch-box {
            background: var(--bg-light);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: border-color 0.3s;
        }

        .arch-box:hover {
            border-color: var(--primary);
        }

        .arch-box.highlight {
            border-color: var(--secondary);
            background: rgba(16, 185, 129, 0.1);
        }

        .arch-box h4 {
            margin-bottom: 10px;
        }

        .arch-box .files {
            font-size: 0.85em;
            color: var(--text-muted);
        }

        /* SVG Icons */
        .svg-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .tab {
            padding: 10px 20px;
            background: var(--bg-light);
            border: none;
            border-radius: 8px;
            color: var(--text);
            cursor: pointer;
            transition: background 0.3s;
        }

        .tab:hover, .tab.active {
            background: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* File Tree */
        .file-tree {
            background: #1a1a2e;
            border-radius: 8px;
            padding: 20px;
            font-family: 'SF Mono', Monaco, monospace;
        }

        .file-tree ul {
            list-style: none;
            padding-left: 20px;
        }

        .file-tree > ul {
            padding-left: 0;
        }

        .file-tree li {
            padding: 5px 0;
        }

        .folder { color: var(--accent); }
        .file { color: var(--text-muted); }
        .file-swift { color: #f05138; }
        .file-metal { color: #8e44ad; }

        /* Animation */
        .animate-in {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUp 0.6s forwards;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* GPU Animation */
        .gpu-animation {
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1) 0%, rgba(16, 185, 129, 0.1) 100%);
            border-radius: 12px;
            margin: 20px 0;
        }

        .gpu-core {
            width: 80px;
            height: 80px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            animation: gpuPulse 1.5s infinite;
        }

        .gpu-core:nth-child(2) { animation-delay: 0.3s; }
        .gpu-core:nth-child(3) { animation-delay: 0.6s; }

        @keyframes gpuPulse {
            0%, 100% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
        }

        .data-flow {
            display: flex;
            align-items: center;
        }

        .data-particle {
            width: 10px;
            height: 10px;
            background: var(--accent);
            border-radius: 50%;
            margin: 0 5px;
            animation: flowRight 1s infinite linear;
        }

        .data-particle:nth-child(2) { animation-delay: 0.2s; }
        .data-particle:nth-child(3) { animation-delay: 0.4s; }

        @keyframes flowRight {
            0% { transform: translateX(-20px); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(20px); opacity: 0; }
        }

        /* Simulation boxes */
        .sim-box {
            text-align: center;
            padding: 15px;
            transition: all 0.3s;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .arch-diagram {
                grid-template-columns: 1fr;
            }

            .flow {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            header h1 {
                font-size: 1.8em;
            }

            #simulation-display {
                flex-direction: column;
            }

            #simulation-display > div:not(.sim-box) {
                transform: rotate(90deg) !important;
            }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--bg-dark);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            white-space: nowrap;
            z-index: 100;
        }

        /* Progress indicator */
        .progress-bar {
            height: 4px;
            background: var(--bg-light);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            animation: progressAnim 2s infinite;
        }

        @keyframes progressAnim {
            0% { width: 0%; }
            50% { width: 100%; }
            100% { width: 0%; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="animate-in">
            <h1>UpscalePlayer</h1>
            <p>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‹•ç”»ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚° ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£</p>
        </header>

        <!-- Overview -->
        <section class="section animate-in" style="animation-delay: 0.1s;">
            <h2><span class="icon">ğŸ¬</span> æ¦‚è¦</h2>
            <p>UpscalePlayerã¯ã€iOSãƒ‡ãƒã‚¤ã‚¹ä¸Šã§Metal GPUã‚’æ´»ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‹•ç”»ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’å®Ÿç¾ã™ã‚‹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ä½è§£åƒåº¦ã®å‹•ç”»ã‚’é«˜å“è³ªã«æ‹¡å¤§ã—ãªãŒã‚‰ã€60fpsã§ã‚¹ãƒ ãƒ¼ã‚ºã«å†ç”Ÿã—ã¾ã™ã€‚</p>

            <div class="gpu-animation">
                <div class="gpu-core">ğŸ¥</div>
                <div class="data-flow">
                    <div class="data-particle"></div>
                    <div class="data-particle"></div>
                    <div class="data-particle"></div>
                </div>
                <div class="gpu-core">âš¡</div>
                <div class="data-flow">
                    <div class="data-particle"></div>
                    <div class="data-particle"></div>
                    <div class="data-particle"></div>
                </div>
                <div class="gpu-core">ğŸ“º</div>
            </div>
            <p style="text-align: center; color: var(--text-muted);">å‹•ç”» â†’ GPUå‡¦ç† â†’ ç”»é¢è¡¨ç¤º</p>
        </section>

        <!-- Main Flow -->
        <section class="section animate-in" style="animation-delay: 0.2s;">
            <h2><span class="icon">ğŸ”„</span> å…¨ä½“å‡¦ç†ãƒ•ãƒ­ãƒ¼</h2>
            <div class="flow-container">
                <div class="flow">
                    <div class="flow-step" onclick="showDetail('video')">
                        <div class="icon">ğŸ“</div>
                        <div class="label">å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«</div>
                        <div class="tech">mp4, mov, mkv...</div>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step" onclick="showDetail('avplayer')">
                        <div class="icon">â–¶ï¸</div>
                        <div class="label">AVPlayer</div>
                        <div class="tech">ãƒ‡ã‚³ãƒ¼ãƒ‰</div>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step" onclick="showDetail('pixelbuffer')">
                        <div class="icon">ğŸ–¼ï¸</div>
                        <div class="label">CVPixelBuffer</div>
                        <div class="tech">BGRA 32bit</div>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step" onclick="showDetail('texture')">
                        <div class="icon">ğŸ”²</div>
                        <div class="label">MTLTexture</div>
                        <div class="tech">GPU ãƒ¡ãƒ¢ãƒª</div>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step" onclick="showDetail('gpu')">
                        <div class="icon">âš¡</div>
                        <div class="label">GPUå‡¦ç†</div>
                        <div class="tech">Metal Shaders</div>
                    </div>
                    <div class="flow-arrow">â†’</div>
                    <div class="flow-step" onclick="showDetail('display')">
                        <div class="icon">ğŸ“±</div>
                        <div class="label">ç”»é¢è¡¨ç¤º</div>
                        <div class="tech">60fps</div>
                    </div>
                </div>
            </div>

            <div id="detail-panel" style="margin-top: 20px; display: none;">
                <div class="card">
                    <h3 id="detail-title"></h3>
                    <p id="detail-content"></p>
                </div>
            </div>
        </section>

        <!-- Components -->
        <section class="section animate-in" style="animation-delay: 0.3s;">
            <h2><span class="icon">ğŸ§©</span> ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ</h2>

            <div class="arch-diagram">
                <div class="arch-box">
                    <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polygon points="5 3 19 12 5 21 5 3" fill="var(--primary)"/>
                    </svg>
                    <h4>VideoPlayerController</h4>
                    <p>å‹•ç”»ãƒ‡ã‚³ãƒ¼ãƒ‰ãƒ»å†ç”Ÿåˆ¶å¾¡</p>
                    <div class="files">VideoPlayerController.swift</div>
                    <div class="progress-bar"><div class="progress-fill"></div></div>
                </div>
                <div class="arch-box highlight">
                    <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" fill="var(--secondary)"/>
                        <path d="M9 9h6M9 12h6M9 15h6" stroke="white"/>
                    </svg>
                    <h4>MetalVideoRenderer</h4>
                    <p>GPUãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†</p>
                    <div class="files">MetalVideoRenderer.swift</div>
                    <div class="progress-bar"><div class="progress-fill"></div></div>
                </div>
                <div class="arch-box">
                    <svg class="svg-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="9" fill="var(--accent)"/>
                        <path d="M12 8v8M8 12h8" stroke="white" stroke-width="2"/>
                    </svg>
                    <h4>UpscalingEngine</h4>
                    <p>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é¸æŠãƒ»çµ±æ‹¬</p>
                    <div class="files">UpscalingEngine.swift</div>
                    <div class="progress-bar"><div class="progress-fill"></div></div>
                </div>
            </div>
        </section>

        <!-- Upscalers -->
        <section class="section animate-in" style="animation-delay: 0.4s;">
            <h2><span class="icon">ğŸ”</span> ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ©ãƒ¼ã®ç¨®é¡</h2>

            <div class="tabs">
                <button class="tab active" onclick="showTab('mps')">MPSUpscaler</button>
                <button class="tab" onclick="showTab('metal')">MetalUpscaler</button>
                <button class="tab" onclick="showTab('coreml')">CoreMLUpscaler</button>
            </div>

            <div id="tab-mps" class="tab-content active">
                <div class="cards">
                    <div class="card">
                        <h3><span class="icon">âš¡</span> é«˜é€Ÿå‡¦ç†</h3>
                        <p>Appleæ¨™æº–ã®Metal Performance Shadersã‚’ä½¿ç”¨ã€‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢æœ€é©åŒ–æ¸ˆã¿ã§æœ€ã‚‚é«˜é€Ÿã€‚</p>
                        <table>
                            <tr><th>ã‚¯ãƒ©ã‚¹</th><th>ç”¨é€”</th></tr>
                            <tr><td>MPSImageBilinearScale</td><td>ãƒã‚¤ãƒªãƒ‹ã‚¢è£œé–“ï¼ˆæœ€é€Ÿï¼‰</td></tr>
                            <tr><td>MPSImageLanczosScale</td><td>ãƒ©ãƒ³ãƒãƒ§ã‚¹è£œé–“ï¼ˆé«˜å“è³ªï¼‰</td></tr>
                            <tr><td>MPSImageGaussianBlur</td><td>ãƒã‚¤ã‚ºé™¤å»</td></tr>
                            <tr><td>MPSImageConvolution</td><td>ã‚·ãƒ£ãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div id="tab-metal" class="tab-content">
                <div class="cards">
                    <div class="card">
                        <h3><span class="icon">ğŸ¨</span> ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼</h3>
                        <p>ç‹¬è‡ªã®Metal Compute Shaderã«ã‚ˆã‚‹é«˜åº¦ãªå‡¦ç†ã€‚</p>
                        <table>
                            <tr><th>ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼</th><th>èª¬æ˜</th></tr>
                            <tr><td>bicubicUpscale</td><td>4x4ãƒ”ã‚¯ã‚»ãƒ«é ˜åŸŸã®ã‚­ãƒ¥ãƒ¼ãƒ“ãƒƒã‚¯è£œé–“</td></tr>
                            <tr><td>lanczosUpscale</td><td>6x6ãƒ”ã‚¯ã‚»ãƒ«ã€sincé–¢æ•°ãƒ™ãƒ¼ã‚¹</td></tr>
                            <tr><td>edgeAwareUpscale</td><td>Sobelã‚¨ãƒƒã‚¸æ¤œå‡º+é©å¿œè£œé–“</td></tr>
                            <tr><td>sharpenTexture</td><td>ã‚¢ãƒ³ã‚·ãƒ£ãƒ¼ãƒ—ãƒã‚¹ã‚¯</td></tr>
                        </table>
                    </div>
                    <div class="card">
                        <h3><span class="icon">âœ¨</span> Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>
                        <p>ã‚¢ãƒ‹ãƒ¡æ˜ åƒã«ç‰¹åŒ–ã—ãŸç”»è³ªæ”¹å–„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ç¾¤ã€‚</p>
                        <table>
                            <tr><th>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</th><th>åŠ¹æœ</th></tr>
                            <tr><td>animeLineDarken</td><td>ç·šç”»ã‚’æ¤œå‡ºã—ã¦å¼·èª¿</td></tr>
                            <tr><td>animeLineThin</td><td>ç·šç”»ã‚’ç´°ãã‚·ãƒ£ãƒ¼ãƒ—ã«</td></tr>
                            <tr><td>animeBilateralDenoise</td><td>ã‚¨ãƒƒã‚¸ä¿æŒãƒ‡ãƒã‚¤ã‚º</td></tr>
                            <tr><td>animeColorBoost</td><td>ãƒ•ãƒ©ãƒƒãƒˆé ˜åŸŸã®å½©åº¦å¼·èª¿</td></tr>
                        </table>
                    </div>
                </div>
            </div>

            <div id="tab-coreml" class="tab-content">
                <div class="cards">
                    <div class="card">
                        <h3><span class="icon">ğŸ¤–</span> AIè¶…è§£åƒ</h3>
                        <p>Core Image + CIFilterã«ã‚ˆã‚‹é«˜åº¦ãªç”»åƒå‡¦ç†ã€‚å°†æ¥çš„ã«ã¯ESRGANç­‰ã®MLãƒ¢ãƒ‡ãƒ«ã‚’çµ±åˆå¯èƒ½ã€‚</p>
                        <div class="code-block">
<span class="comment">// å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</span>
<span class="keyword">func</span> <span class="function">upscaleWithFilters</span>(image) {
    result = <span class="function">scaleTransform</span>(image)    <span class="comment">// ã‚¹ã‚±ãƒ¼ãƒ«</span>
    result = <span class="function">enhanceEdges</span>(result)     <span class="comment">// ã‚¨ãƒƒã‚¸å¼·èª¿</span>
    result = <span class="function">applyUnsharpMask</span>(result) <span class="comment">// ã‚·ãƒ£ãƒ¼ãƒ—</span>
    result = <span class="function">reduceNoise</span>(result)      <span class="comment">// ãƒã‚¤ã‚ºé™¤å»</span>
    result = <span class="function">enhanceColors</span>(result)    <span class="comment">// è‰²å¼·èª¿</span>
    <span class="keyword">return</span> result
}
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filter Pipeline -->
        <section class="section animate-in" style="animation-delay: 0.5s;">
            <h2><span class="icon">ğŸ›ï¸</span> ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨é †åº</h2>
            <p style="margin-bottom: 20px;">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¯ä»¥ä¸‹ã®é †åºã§é©ç”¨ã•ã‚Œã¾ã™ï¼ˆå·¦ã‹ã‚‰å³ã¸ï¼‰ï¼š</p>

            <div class="filter-chain">
                <div class="filter-item" data-tip="è§£åƒåº¦ã‚’æ‹¡å¤§">1. ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</div>
                <div class="filter-arrow">â†’</div>
                <div class="filter-item" data-tip="ã‚¢ãƒ‹ãƒ¡å°‚ç”¨ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼">2. Anime Filter</div>
                <div class="filter-arrow">â†’</div>
                <div class="filter-item" data-tip="æ˜ã‚‹ã•ãƒ»ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ">3. Brightness/Contrast</div>
                <div class="filter-arrow">â†’</div>
                <div class="filter-item" data-tip="ã‚¹ãƒãƒ¼ãƒˆå½©åº¦">4. Vibrance</div>
                <div class="filter-arrow">â†’</div>
                <div class="filter-item" data-tip="ãƒ•ã‚£ãƒ«ãƒ é¢¨ç²’å­">5. Film Grain</div>
                <div class="filter-arrow">â†’</div>
                <div class="filter-item" data-tip="VR/360åº¦æŠ•å½±">6. VR Projection</div>
            </div>
        </section>

        <!-- Processing Pipeline -->
        <section class="section animate-in" style="animation-delay: 0.6s;">
            <h2><span class="icon">âš™ï¸</span> GPUå‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</h2>

            <div class="pipeline">
                <div class="pipeline-line"></div>

                <div class="pipeline-step">
                    <div class="pipeline-number">1</div>
                    <div class="pipeline-content">
                        <h3>CVPixelBuffer â†’ MTLTexture å¤‰æ›</h3>
                        <p><code>CVMetalTextureCacheCreateTextureFromImage</code>ã‚’ä½¿ç”¨ã—ãŸã‚¼ãƒ­ã‚³ãƒ”ãƒ¼å¤‰æ›ã€‚CPU/GPUé–“ã®ãƒ¡ãƒ¢ãƒªã‚³ãƒ”ãƒ¼ã‚’å›é¿ã—ã€é«˜é€Ÿå‡¦ç†ã‚’å®Ÿç¾ã€‚</p>
                    </div>
                </div>

                <div class="pipeline-step">
                    <div class="pipeline-number">2</div>
                    <div class="pipeline-content">
                        <h3>Fast Path ãƒã‚§ãƒƒã‚¯</h3>
                        <p>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒå…¨ã¦OFFã®å ´åˆã€GPUå‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã‚½ãƒ¼ã‚¹ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ç›´æ¥ä½¿ç”¨ã€‚ä¸è¦ãªå‡¦ç†ã‚’å›é¿ã€‚</p>
                        <div class="code-block">
<span class="keyword">if</span> !needsUpscaling && !needsBrightness && !needsVibrance ... {
    <span class="keyword">self</span>.currentTexture = sourceTexture  <span class="comment">// å‡¦ç†ã‚¹ã‚­ãƒƒãƒ—</span>
    <span class="keyword">return</span>
}
                        </div>
                    </div>
                </div>

                <div class="pipeline-step">
                    <div class="pipeline-number">3</div>
                    <div class="pipeline-content">
                        <h3>ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å®Ÿè¡Œ</h3>
                        <p>é¸æŠã•ã‚ŒãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ï¼ˆBilinear/Bicubic/Lanczos/AIï¼‰ã§ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æ‹¡å¤§ã€‚</p>
                    </div>
                </div>

                <div class="pipeline-step">
                    <div class="pipeline-number">4</div>
                    <div class="pipeline-content">
                        <h3>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</h3>
                        <p>Metal Compute Shaderã§å„ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é †æ¬¡é©ç”¨ã€‚GPUã®ä¸¦åˆ—å‡¦ç†èƒ½åŠ›ã‚’æ´»ç”¨ã€‚</p>
                    </div>
                </div>

                <div class="pipeline-step">
                    <div class="pipeline-number">5</div>
                    <div class="pipeline-content">
                        <h3>ç”»é¢è¡¨ç¤º</h3>
                        <p><code>MTKView</code>ã®drawableã«ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ã‚³ãƒ”ãƒ¼ã—ã€<code>present()</code>ã§è¡¨ç¤ºã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Performance -->
        <section class="section animate-in" style="animation-delay: 0.7s;">
            <h2><span class="icon">ğŸš€</span> ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–</h2>

            <div class="cards">
                <div class="card">
                    <h3><span class="icon">âš¡</span> Fast Path</h3>
                    <p>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¸è¦æ™‚ã¯å‡¦ç†ã‚’ã‚¹ã‚­ãƒƒãƒ—ã€‚CPU/GPUä¸¡æ–¹ã®è² è·ã‚’å‰Šæ¸›ã€‚</p>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ’¾</span> ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚­ãƒ£ãƒƒã‚·ãƒ¥</h3>
                    <p>CVMetalTextureCacheã«ã‚ˆã‚‹ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼å¤‰æ›ã€‚ãƒ¡ãƒ¢ãƒªã‚³ãƒ”ãƒ¼ã‚’æ’é™¤ã€‚</p>
                </div>
                <div class="card">
                    <h3><span class="icon">â™»ï¸</span> ãƒ†ã‚¯ã‚¹ãƒãƒ£å†åˆ©ç”¨</h3>
                    <p>ã‚µã‚¤ã‚ºå¤‰æ›´æ™‚ã®ã¿æ–°è¦ä½œæˆã€‚æ¯ãƒ•ãƒ¬ãƒ¼ãƒ ã®å‰²ã‚Šå½“ã¦ã‚’å›é¿ã€‚</p>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ”„</span> éåŒæœŸGPUå®Ÿè¡Œ</h3>
                    <p><code>waitUntilCompleted()</code>ã‚’å‰Šé™¤ã€‚CPU/GPUãŒä¸¦åˆ—å‹•ä½œã€‚</p>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h3 style="margin-bottom: 15px;">CPU/GPUä¸¦åˆ—å‡¦ç†ã‚¤ãƒ¡ãƒ¼ã‚¸</h3>
                <div class="code-block" style="font-size: 0.85em;">
<span class="comment">ãƒ•ãƒ¬ãƒ¼ãƒ N:   </span>[CPU: ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—] â†’ [GPU: å‡¦ç†] â†’ [GPU: è¡¨ç¤º]
<span class="comment">ãƒ•ãƒ¬ãƒ¼ãƒ N+1:</span>                      [CPU: ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—] â†’ [GPU: å‡¦ç†] â†’ [GPU: è¡¨ç¤º]
                                  <span class="string">â†‘</span>
                         <span class="string">CPU/GPUãŒåŒæ™‚ã«å‹•ä½œï¼ˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å‡¦ç†ï¼‰</span>
                </div>
            </div>
        </section>

        <!-- File Structure -->
        <section class="section animate-in" style="animation-delay: 0.8s;">
            <h2><span class="icon">ğŸ“‚</span> ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ</h2>

            <div class="file-tree">
                <ul>
                    <li><span class="folder">ğŸ“ UpscalePlayer/</span>
                        <ul>
                            <li><span class="folder">ğŸ“ App/</span>
                                <ul>
                                    <li><span class="file-swift">ğŸ“„ UpscalePlayerApp.swift</span> <span class="file">- ã‚¢ãƒ—ãƒªã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ Models/</span>
                                <ul>
                                    <li><span class="file-swift">ğŸ“„ DeviceCapability.swift</span> <span class="file">- ãƒ‡ãƒã‚¤ã‚¹èƒ½åŠ›æ¤œå‡º</span></li>
                                    <li><span class="file-swift">ğŸ“„ PerformanceMonitor.swift</span> <span class="file">- CPU/ãƒ¡ãƒ¢ãƒªç›£è¦–</span></li>
                                    <li><span class="file-swift">ğŸ“„ UpscalingQuality.swift</span> <span class="file">- è¨­å®šãƒ‡ãƒ¼ã‚¿æ§‹é€ </span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ Shaders/</span>
                                <ul>
                                    <li><span class="file-metal">ğŸ“„ Upscaling.metal</span> <span class="file">- Metal Compute Shaders</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ Upscaling/</span>
                                <ul>
                                    <li><span class="file-swift">ğŸ“„ CoreMLUpscaler.swift</span> <span class="file">- AIè¶…è§£åƒ</span></li>
                                    <li><span class="file-swift">ğŸ“„ MetalUpscaler.swift</span> <span class="file">- ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼</span></li>
                                    <li><span class="file-swift">ğŸ“„ MPSUpscaler.swift</span> <span class="file">- MPSé«˜é€Ÿå‡¦ç†</span></li>
                                    <li><span class="file-swift">ğŸ“„ UpscalingEngine.swift</span> <span class="file">- çµ±æ‹¬ã‚¨ãƒ³ã‚¸ãƒ³</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ VideoPlayer/</span>
                                <ul>
                                    <li><span class="file-swift">ğŸ“„ MetalVideoRenderer.swift</span> <span class="file">- GPUãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼</span></li>
                                    <li><span class="file-swift">ğŸ“„ VideoPlayerController.swift</span> <span class="file">- å†ç”Ÿåˆ¶å¾¡</span></li>
                                </ul>
                            </li>
                            <li><span class="folder">ğŸ“ Views/</span>
                                <ul>
                                    <li><span class="file-swift">ğŸ“„ PlayerView.swift</span> <span class="file">- å†ç”Ÿç”»é¢</span></li>
                                    <li><span class="file-swift">ğŸ“„ SettingsView.swift</span> <span class="file">- è¨­å®šç”»é¢</span></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </section>

        <!-- Tech Stack -->
        <section class="section animate-in" style="animation-delay: 0.9s;">
            <h2><span class="icon">ğŸ› ï¸</span> æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯</h2>

            <table>
                <tr>
                    <th>ã‚«ãƒ†ã‚´ãƒª</th>
                    <th>æŠ€è¡“</th>
                    <th>ç”¨é€”</th>
                </tr>
                <tr>
                    <td>UI</td>
                    <td>SwiftUI, UIKit</td>
                    <td>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹</td>
                </tr>
                <tr>
                    <td>å‹•ç”»ãƒ‡ã‚³ãƒ¼ãƒ‰</td>
                    <td>AVFoundation</td>
                    <td>AVPlayer, AVAsset ã«ã‚ˆã‚‹å‹•ç”»èª­ã¿è¾¼ã¿ãƒ»ãƒ‡ã‚³ãƒ¼ãƒ‰</td>
                </tr>
                <tr>
                    <td>GPUå‡¦ç†</td>
                    <td>Metal, MetalKit, MPS</td>
                    <td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç”»åƒå‡¦ç†ãƒ»ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</td>
                </tr>
                <tr>
                    <td>ç”»åƒå‡¦ç†</td>
                    <td>Core Image, Core Video</td>
                    <td>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãƒ»ãƒ”ã‚¯ã‚»ãƒ«ãƒãƒƒãƒ•ã‚¡ç®¡ç†</td>
                </tr>
                <tr>
                    <td>æ©Ÿæ¢°å­¦ç¿’</td>
                    <td>Core ML</td>
                    <td>å°†æ¥ã®AIè¶…è§£åƒãƒ¢ãƒ‡ãƒ«çµ±åˆç”¨</td>
                </tr>
                <tr>
                    <td>ãƒ•ãƒ¬ãƒ¼ãƒ åŒæœŸ</td>
                    <td>CADisplayLink</td>
                    <td>60Hzç”»é¢ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥åŒæœŸ</td>
                </tr>
            </table>
        </section>

        <!-- Metal Shaders Deep Dive -->
        <section class="section animate-in" style="animation-delay: 1.0s;">
            <h2><span class="icon">âš™ï¸</span> Metal Shader è©³ç´°è§£èª¬</h2>

            <div class="tabs">
                <button class="tab active" onclick="showShaderTab('bicubic')">Bicubicè£œé–“</button>
                <button class="tab" onclick="showShaderTab('lanczos')">Lanczosè£œé–“</button>
                <button class="tab" onclick="showShaderTab('anime')">Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</button>
                <button class="tab" onclick="showShaderTab('vr')">VRæŠ•å½±</button>
            </div>

            <div id="shader-bicubic" class="tab-content active">
                <h3>Bicubic (ãƒã‚¤ã‚­ãƒ¥ãƒ¼ãƒ“ãƒƒã‚¯) è£œé–“</h3>
                <p>4Ã—4ãƒ”ã‚¯ã‚»ãƒ«ã®é ˜åŸŸã‹ã‚‰ã€3æ¬¡å¤šé …å¼ã«ã‚ˆã‚‹é‡ã¿ä»˜ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã‚’è¡Œã„ã¾ã™ã€‚</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ç¯„å›²</h4>
                        <div style="background: #1a1a2e; padding: 20px; border-radius: 8px; text-align: center;">
                            <svg viewBox="0 0 200 200" style="max-width: 300px;">
                                <!-- Grid -->
                                <defs>
                                    <pattern id="grid" width="40" height="40" patternUnits="userSpaceOnUse">
                                        <path d="M 40 0 L 0 0 0 40" fill="none" stroke="#444" stroke-width="1"/>
                                    </pattern>
                                </defs>
                                <rect width="200" height="200" fill="url(#grid)"/>

                                <!-- 4x4 sample area -->
                                <rect x="40" y="40" width="120" height="120" fill="rgba(99, 102, 241, 0.2)" stroke="var(--primary)" stroke-width="2"/>

                                <!-- Sample points -->
                                <circle cx="60" cy="60" r="4" fill="var(--accent)"/>
                                <circle cx="100" cy="60" r="4" fill="var(--accent)"/>
                                <circle cx="140" cy="60" r="4" fill="var(--accent)"/>
                                <circle cx="60" cy="100" r="4" fill="var(--accent)"/>
                                <circle cx="100" cy="100" r="6" fill="var(--secondary)"/>
                                <circle cx="140" cy="100" r="4" fill="var(--accent)"/>
                                <circle cx="60" cy="140" r="4" fill="var(--accent)"/>
                                <circle cx="100" cy="140" r="4" fill="var(--accent)"/>
                                <circle cx="140" cy="140" r="4" fill="var(--accent)"/>

                                <text x="100" y="190" text-anchor="middle" fill="var(--text)" font-size="12">ä¸­å¿ƒãƒ”ã‚¯ã‚»ãƒ« + å‘¨å›²15ãƒ”ã‚¯ã‚»ãƒ«</text>
                            </svg>
                        </div>
                    </div>
                    <div>
                        <h4>å‡¦ç†ã‚³ãƒ¼ãƒ‰</h4>
                        <div class="code-block">
<span class="keyword">kernel void</span> <span class="function">bicubicUpscale</span>(...) {
    <span class="comment">// 4x4ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°</span>
    <span class="keyword">for</span> (<span class="type">int</span> y = -<span class="string">1</span>; y &lt;= <span class="string">2</span>; y++) {
        <span class="keyword">for</span> (<span class="type">int</span> x = -<span class="string">1</span>; x &lt;= <span class="string">2</span>; x++) {
            <span class="type">float</span> weightX = <span class="function">cubicWeight</span>(x - frac.x);
            <span class="type">float</span> weightY = <span class="function">cubicWeight</span>(y - frac.y);
            <span class="type">float</span> weight = weightX * weightY;

            color += texture.<span class="function">read</span>(samplePos) * weight;
        }
    }
}
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9em;">ç‰¹å¾´: ãƒã‚¤ãƒªãƒ‹ã‚¢ã‚ˆã‚Šæ»‘ã‚‰ã‹ã€ãƒ©ãƒ³ãƒãƒ§ã‚¹ã‚ˆã‚Šé«˜é€Ÿ</p>
                    </div>
                </div>
            </div>

            <div id="shader-lanczos" class="tab-content">
                <h3>Lanczos (ãƒ©ãƒ³ãƒãƒ§ã‚¹) è£œé–“</h3>
                <p>Lanczos-3ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯6Ã—6ãƒ”ã‚¯ã‚»ãƒ«é ˜åŸŸã‹ã‚‰ã€sincé–¢æ•°ã«ã‚ˆã‚‹é‡ã¿ä»˜ãã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã€‚æœ€é«˜å“è³ªã€‚</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>Sincé–¢æ•°ã®é‡ã¿</h4>
                        <div style="background: #1a1a2e; padding: 20px; border-radius: 8px;">
                            <svg viewBox="0 0 300 200" style="max-width: 400px;">
                                <!-- Axes -->
                                <line x1="30" y1="100" x2="270" y2="100" stroke="var(--border)" stroke-width="2"/>
                                <line x1="150" y1="20" x2="150" y2="180" stroke="var(--border)" stroke-width="2"/>

                                <!-- Sinc curve -->
                                <path d="M 30 100 Q 90 60, 120 90 T 150 100 T 180 110 T 210 105 T 240 102 T 270 100"
                                      fill="none" stroke="var(--primary)" stroke-width="3"/>

                                <!-- Labels -->
                                <text x="150" y="15" text-anchor="middle" fill="var(--text)" font-size="12">Lanczos Weight</text>
                                <text x="30" y="115" fill="var(--text-muted)" font-size="10">-3</text>
                                <text x="150" y="115" fill="var(--text-muted)" font-size="10">0</text>
                                <text x="260" y="115" fill="var(--text-muted)" font-size="10">3</text>
                            </svg>
                        </div>
                    </div>
                    <div>
                        <h4>é‡ã¿è¨ˆç®—å¼</h4>
                        <div class="code-block">
<span class="comment">// Lanczos window function</span>
<span class="type">float</span> <span class="function">lanczosWeight</span>(<span class="type">float</span> x, <span class="type">float</span> a) {
    <span class="keyword">if</span> (x == <span class="string">0.0</span>) <span class="keyword">return</span> <span class="string">1.0</span>;
    <span class="keyword">if</span> (<span class="function">abs</span>(x) >= a) <span class="keyword">return</span> <span class="string">0.0</span>;

    <span class="type">float</span> piX = PI * x;
    <span class="type">float</span> piXOverA = piX / a;

    <span class="comment">// sinc(x) * sinc(x/a)</span>
    <span class="keyword">return</span> (<span class="function">sin</span>(piX) / piX) *
           (<span class="function">sin</span>(piXOverA) / piXOverA);
}
                        </div>
                        <p style="margin-top: 10px; font-size: 0.9em;">ç‰¹å¾´: æœ€é«˜å“è³ªã€ã‚¨ãƒƒã‚¸ãŒé®®æ˜ã€å‡¦ç†è² è·é«˜</p>
                    </div>
                </div>
            </div>

            <div id="shader-anime" class="tab-content">
                <h3>Anime Enhancement ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>
                <p>ã‚¢ãƒ‹ãƒ¡æ˜ åƒã«ç‰¹åŒ–ã—ãŸ4æ®µéšã®å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³</p>

                <div class="pipeline">
                    <div class="pipeline-line"></div>

                    <div class="pipeline-step">
                        <div class="pipeline-number" style="background: #e74c3c;">1</div>
                        <div class="pipeline-content">
                            <h3>Line Darkenï¼ˆç·šç”»å¼·èª¿ï¼‰</h3>
                            <p>å‘¨å›²ã‚ˆã‚Šæš—ã„ãƒ”ã‚¯ã‚»ãƒ«ã‚’æ¤œå‡ºã—ã€ã•ã‚‰ã«æš—ãã™ã‚‹ã“ã¨ã§ç·šç”»ã‚’å¼·èª¿ã—ã¾ã™ã€‚</p>
                            <div class="code-block">
<span class="type">float</span> lineStrength = maxLuma - centerLuma;
<span class="type">float</span> contrast = maxLuma - minLuma;

<span class="keyword">if</span> (contrast > <span class="string">0.05</span> && lineStrength > <span class="string">0.1</span>) {
    darkenAmount = lineStrength * strength * <span class="string">0.5</span>;
}
                            </div>
                        </div>
                    </div>

                    <div class="pipeline-step">
                        <div class="pipeline-number" style="background: #3498db;">2</div>
                        <div class="pipeline-content">
                            <h3>Bilateral Denoiseï¼ˆã‚¨ãƒƒã‚¸ä¿æŒãƒ‡ãƒã‚¤ã‚ºï¼‰</h3>
                            <p>ã‚¨ãƒƒã‚¸ã‚’ä¿æŒã—ãªãŒã‚‰ãƒã‚¤ã‚ºã‚’é™¤å»ã€‚ã‚¢ãƒ‹ãƒ¡ã®å¹³å¦ãªé ˜åŸŸã‚’ç¶ºéº—ã«ã€‚</p>
                            <div class="code-block">
<span class="comment">// è·é›¢ã«ã‚ˆã‚‹é‡ã¿ Ã— è‰²ã®é¡ä¼¼åº¦ã«ã‚ˆã‚‹é‡ã¿</span>
<span class="type">float</span> spatialWeight = <span class="function">exp</span>(-spatialDistÂ² / spatialSigmaÂ²);
<span class="type">float</span> rangeWeight = <span class="function">exp</span>(-colorDistÂ² / rangeSigmaÂ²);
<span class="type">float</span> weight = spatialWeight * rangeWeight;
                            </div>
                        </div>
                    </div>

                    <div class="pipeline-step">
                        <div class="pipeline-number" style="background: #9b59b6;">3</div>
                        <div class="pipeline-content">
                            <h3>Line Thinï¼ˆç·šç”»ç´°ç·šåŒ–ï¼‰</h3>
                            <p>ç·šç”»ãƒ”ã‚¯ã‚»ãƒ«ã‚’æ˜ã‚‹ã„æ–¹å‘ã«ã‚·ãƒ•ãƒˆã—ã¦ç´°ãã—ã¾ã™ã€‚</p>
                        </div>
                    </div>

                    <div class="pipeline-step">
                        <div class="pipeline-number" style="background: #2ecc71;">4</div>
                        <div class="pipeline-content">
                            <h3>Color Boostï¼ˆè‰²å½©å¼·èª¿ï¼‰</h3>
                            <p>ãƒ•ãƒ©ãƒƒãƒˆãªé ˜åŸŸã®å½©åº¦ã‚’ä¸Šã’ã¦ã€ã‚¢ãƒ‹ãƒ¡ã‚‰ã—ã„é®®ã‚„ã‹ã•ã‚’å®Ÿç¾ã€‚</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="shader-vr" class="tab-content">
                <h3>VR/360Â° æŠ•å½±å¤‰æ›</h3>
                <p>Equirectangularï¼ˆæ­£è·å††ç­’å›³æ³•ï¼‰ã‹ã‚‰Perspectiveï¼ˆé€è¦–æŠ•å½±ï¼‰ã¸ã®å¤‰æ›</p>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>å‡¦ç†ã‚¹ãƒ†ãƒƒãƒ—</h4>
                        <div class="code-block">
<span class="comment">// 1. ç”»é¢åº§æ¨™ â†’ æ­£è¦åŒ–åº§æ¨™</span>
<span class="type">float2</span> ndc = uv * <span class="string">2.0</span> - <span class="string">1.0</span>;

<span class="comment">// 2. è¦–ç·šãƒ™ã‚¯ãƒˆãƒ«ä½œæˆ</span>
<span class="type">float3</span> rayDir = <span class="function">normalize</span>(
    <span class="type">float3</span>(ndc.x * aspect * tanHalfFov,
            ndc.y * tanHalfFov,
            <span class="string">1.0</span>)
);

<span class="comment">// 3. ã‚«ãƒ¡ãƒ©å›è»¢é©ç”¨</span>
rayDir = rotationMatrix * rayDir;

<span class="comment">// 4. çƒé¢åº§æ¨™ã«å¤‰æ›</span>
<span class="type">float</span> phi = <span class="function">atan2</span>(rayDir.x, rayDir.z);
<span class="type">float</span> theta = <span class="function">asin</span>(rayDir.y);

<span class="comment">// 5. ãƒ†ã‚¯ã‚¹ãƒãƒ£UVã«å¤‰æ›</span>
sphereUV.x = <span class="string">0.5</span> + (phi / (<span class="string">2.0</span> * PI));
sphereUV.y = <span class="string">0.5</span> + (theta / PI);
                        </div>
                    </div>
                    <div>
                        <h4>æŠ•å½±ã‚¤ãƒ¡ãƒ¼ã‚¸</h4>
                        <div style="background: #1a1a2e; padding: 20px; border-radius: 8px; text-align: center;">
                            <svg viewBox="0 0 300 300" style="max-width: 350px;">
                                <!-- Equirectangular texture (flat) -->
                                <rect x="20" y="20" width="260" height="130" fill="none" stroke="var(--primary)" stroke-width="2" stroke-dasharray="5,5"/>
                                <text x="150" y="95" text-anchor="middle" fill="var(--text-muted)" font-size="12">Equirectangular</text>

                                <!-- Arrow -->
                                <path d="M 150 160 L 150 180" stroke="var(--accent)" stroke-width="3" marker-end="url(#arrowhead)"/>
                                <defs>
                                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="5" refY="5" orient="auto">
                                        <polygon points="0 0, 10 5, 0 10" fill="var(--accent)"/>
                                    </marker>
                                </defs>

                                <!-- Perspective view (3D-ish) -->
                                <path d="M 80 200 L 150 250 L 220 200 L 150 200 Z" fill="rgba(99, 102, 241, 0.3)" stroke="var(--primary)" stroke-width="2"/>
                                <circle cx="150" cy="220" r="3" fill="var(--secondary)"/>
                                <text x="150" y="275" text-anchor="middle" fill="var(--text-muted)" font-size="12">Perspective View</text>
                            </svg>
                        </div>
                    </div>
                </div>

                <div class="card" style="margin-top: 20px;">
                    <h3>å¯¾å¿œãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ</h3>
                    <table>
                        <tr><th>ãƒ¢ãƒ¼ãƒ‰</th><th>èª¬æ˜</th></tr>
                        <tr><td>VR360</td><td>å…¨å¤©çƒï¼ˆ360Â°Ã—180Â°ï¼‰ãƒãƒƒãƒ”ãƒ³ã‚°</td></tr>
                        <tr><td>VR180</td><td>åŠçƒï¼ˆ180Â°Ã—180Â°ï¼‰ãƒãƒƒãƒ”ãƒ³ã‚°</td></tr>
                        <tr><td>SBS (Side-by-Side)</td><td>å·¦å³åˆ†å‰²ã‚¹ãƒ†ãƒ¬ã‚ª</td></tr>
                        <tr><td>TaB (Top-and-Bottom)</td><td>ä¸Šä¸‹åˆ†å‰²ã‚¹ãƒ†ãƒ¬ã‚ª</td></tr>
                    </table>
                </div>
            </div>
        </section>

        <!-- Algorithm Comparison -->
        <section class="section animate-in" style="animation-delay: 1.1s;">
            <h2><span class="icon">ğŸ“Š</span> ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ¯”è¼ƒ</h2>

            <div style="overflow-x: auto;">
                <table>
                    <tr>
                        <th>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </th>
                        <th>é€Ÿåº¦</th>
                        <th>å“è³ª</th>
                        <th>ã‚¨ãƒƒã‚¸ä¿æŒ</th>
                        <th>æ¨å¥¨ç”¨é€”</th>
                    </tr>
                    <tr>
                        <td><strong>Bilinear</strong></td>
                        <td><div style="background: var(--secondary); width: 95%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 50%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 40%; height: 20px; border-radius: 4px;"></div></td>
                        <td>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</td>
                    </tr>
                    <tr>
                        <td><strong>Bicubic</strong></td>
                        <td><div style="background: var(--secondary); width: 80%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 75%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 70%; height: 20px; border-radius: 4px;"></div></td>
                        <td>ãƒãƒ©ãƒ³ã‚¹å‹ã€æ±ç”¨</td>
                    </tr>
                    <tr>
                        <td><strong>Lanczos</strong></td>
                        <td><div style="background: var(--secondary); width: 60%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 95%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 90%; height: 20px; border-radius: 4px;"></div></td>
                        <td>é«˜å“è³ªã€å†™çœŸãƒ»å®Ÿå†™</td>
                    </tr>
                    <tr>
                        <td><strong>EdgeAware</strong></td>
                        <td><div style="background: var(--secondary); width: 55%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 85%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 95%; height: 20px; border-radius: 4px;"></div></td>
                        <td>æ–‡å­—ã€UIã€ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯</td>
                    </tr>
                    <tr>
                        <td><strong>Anime4K</strong></td>
                        <td><div style="background: var(--secondary); width: 50%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 90%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 95%; height: 20px; border-radius: 4px;"></div></td>
                        <td>ã‚¢ãƒ‹ãƒ¡å°‚ç”¨</td>
                    </tr>
                    <tr>
                        <td><strong>MLSR (AI)</strong></td>
                        <td><div style="background: var(--secondary); width: 30%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 98%; height: 20px; border-radius: 4px;"></div></td>
                        <td><div style="background: var(--accent); width: 98%; height: 20px; border-radius: 4px;"></div></td>
                        <td>æœ€é«˜å“è³ªã€é™æ­¢ç”»</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- Performance Metrics -->
        <section class="section animate-in" style="animation-delay: 1.2s;">
            <h2><span class="icon">â±ï¸</span> ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹</h2>

            <div class="cards">
                <div class="card">
                    <h3><span class="icon">ğŸ¯</span> ç›®æ¨™ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 3em; font-weight: bold; color: var(--secondary);">60fps</div>
                        <p style="color: var(--text-muted);">16.67ms / frame</p>
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ’¾</span> ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 2.5em; font-weight: bold; color: var(--primary);">~200MB</div>
                        <p style="color: var(--text-muted);">1080på‹•ç”»å‡¦ç†æ™‚</p>
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">âš¡</span> GPUä½¿ç”¨ç‡</h3>
                    <div style="text-align: center; padding: 20px;">
                        <div style="font-size: 2.5em; font-weight: bold; color: var(--accent);">40-70%</div>
                        <p style="color: var(--text-muted);">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹æ™‚</p>
                    </div>
                </div>
            </div>

            <h3 style="margin: 30px 0 15px 0;">å‡¦ç†æ™‚é–“ã®å†…è¨³ï¼ˆ1ãƒ•ãƒ¬ãƒ¼ãƒ ã‚ãŸã‚Šï¼‰</h3>
            <div style="background: #1a1a2e; padding: 20px; border-radius: 8px;">
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—</span>
                        <span>0.5ms</span>
                    </div>
                    <div style="background: var(--bg-light); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div style="background: var(--primary); width: 3%; height: 100%;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>ãƒ†ã‚¯ã‚¹ãƒãƒ£å¤‰æ›</span>
                        <span>1.0ms</span>
                    </div>
                    <div style="background: var(--bg-light); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div style="background: var(--primary); width: 6%; height: 100%;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</span>
                        <span>8.0ms</span>
                    </div>
                    <div style="background: var(--bg-light); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div style="background: var(--secondary); width: 48%; height: 100%;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</span>
                        <span>4.0ms</span>
                    </div>
                    <div style="background: var(--bg-light); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div style="background: var(--accent); width: 24%; height: 100%;"></div>
                    </div>
                </div>
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>ç”»é¢è¡¨ç¤º</span>
                        <span>2.0ms</span>
                    </div>
                    <div style="background: var(--bg-light); height: 8px; border-radius: 4px; overflow: hidden;">
                        <div style="background: var(--primary); width: 12%; height: 100%;"></div>
                    </div>
                </div>
                <div style="border-top: 1px solid var(--border); padding-top: 15px; margin-top: 15px;">
                    <div style="display: flex; justify-content: space-between; font-weight: bold;">
                        <span>åˆè¨ˆ</span>
                        <span>15.5ms (64.5 fps)</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- Troubleshooting -->
        <section class="section animate-in" style="animation-delay: 1.3s;">
            <h2><span class="icon">ğŸ”§</span> ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

            <div class="cards">
                <div class="card">
                    <h3><span class="icon">ğŸ¢</span> ãƒ•ãƒ¬ãƒ¼ãƒ è½ã¡ã™ã‚‹</h3>
                    <ul style="line-height: 2;">
                        <li>âœ“ ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚’Bilinearã«å¤‰æ›´</li>
                        <li>âœ“ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ç„¡åŠ¹åŒ–</li>
                        <li>âœ“ ç›®æ¨™è§£åƒåº¦ã‚’ä¸‹ã’ã‚‹</li>
                        <li>âœ“ ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚’çµ‚äº†</li>
                    </ul>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸŒ¡ï¸</span> ç™ºç†±ãŒæ¿€ã—ã„</h3>
                    <ul style="line-height: 2;">
                        <li>âœ“ GPUã‚¤ãƒ³ãƒ†ãƒ³ã‚·ãƒ–ãªè¨­å®šã‚’ä¸‹ã’ã‚‹</li>
                        <li>âœ“ Anime4Kãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ç„¡åŠ¹åŒ–</li>
                        <li>âœ“ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆã‚’30fpsã«åˆ¶é™</li>
                        <li>âœ“ æ˜ã‚‹ã•ã‚’ä¸‹ã’ã‚‹</li>
                    </ul>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ–¼ï¸</span> ç”»è³ªãŒæ‚ªã„</h3>
                    <ul style="line-height: 2;">
                        <li>âœ“ Lanczosã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’è©¦ã™</li>
                        <li>âœ“ Sharpnessã‚’ä¸Šã’ã‚‹</li>
                        <li>âœ“ ã‚¢ãƒ³ãƒã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’æœ‰åŠ¹åŒ–</li>
                        <li>âœ“ ã‚½ãƒ¼ã‚¹å‹•ç”»ã®å“è³ªã‚’ç¢ºèª</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Future Extensions -->
        <section class="section animate-in" style="animation-delay: 1.4s;">
            <h2><span class="icon">ğŸš€</span> ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§</h2>

            <div class="cards">
                <div class="card">
                    <h3><span class="icon">ğŸ¤–</span> Real-ESRGANçµ±åˆ</h3>
                    <p>æœ€å…ˆç«¯ã®AIè¶…è§£åƒãƒ¢ãƒ‡ãƒ«ã‚’Core MLã¨ã—ã¦çµ±åˆã€‚4Kâ†’8Kã®è¶…é«˜è§£åƒåº¦åŒ–ã«å¯¾å¿œã€‚</p>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(99, 102, 241, 0.1); border-radius: 6px;">
                        <strong>å®Ÿè£…è¨ˆç”»:</strong> ESRGANãƒ¢ãƒ‡ãƒ«ã‚’CoreMLTools ã§ã‚³ãƒ³ãƒãƒ¼ãƒˆ â†’ CoreMLUpscalerã«çµ±åˆ
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ¨</span> HDRå¯¾å¿œ</h3>
                    <p>High Dynamic Rangeå‹•ç”»ã®ã‚µãƒãƒ¼ãƒˆã€‚Wide Color Gamut (P3/Rec.2020) ã«å¯¾å¿œã€‚</p>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(16, 185, 129, 0.1); border-radius: 6px;">
                        <strong>æŠ€è¡“:</strong> RGBA16Float ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã€EDR (Extended Dynamic Range)
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ¬</span> 120Hz ProMotionå¯¾å¿œ - ãƒ•ãƒ¬ãƒ¼ãƒ è£œé–“</h3>

                    <div style="background: rgba(99, 102, 241, 0.1); padding: 12px; border-radius: 6px; margin-bottom: 12px;">
                        <strong>ğŸ¯ ç¾çŠ¶:</strong> ProMotionãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã§120Hzå‹•ä½œå¯èƒ½ã ãŒã€60fpsãƒ•ãƒ¬ãƒ¼ãƒ ã‚’é‡è¤‡è¡¨ç¤ºã™ã‚‹ã®ã¿<br>
                        <strong>âœ¨ ç›®æ¨™:</strong> çœŸã®120fpså†ç”Ÿï¼ˆ60fps â†’ 120fps è£œé–“ï¼‰
                    </div>

                    <h4 style="margin-top: 15px; color: var(--accent);">å®Ÿè£…ã‚ªãƒ—ã‚·ãƒ§ãƒ³</h4>

                    <table style="margin-top: 10px; font-size: 0.9em;">
                        <tr>
                            <th>æ–¹å¼</th>
                            <th>å“è³ª</th>
                            <th>é€Ÿåº¦</th>
                            <th>æ¨å¥¨æ©Ÿç¨®</th>
                        </tr>
                        <tr>
                            <td><strong>Optical Flow</strong></td>
                            <td>ä¸­</td>
                            <td>âš¡âš¡âš¡</td>
                            <td>iPhone 13ä»¥é™</td>
                        </tr>
                        <tr>
                            <td><strong>RIFE (AI/ML)</strong></td>
                            <td>é«˜</td>
                            <td>âš¡âš¡</td>
                            <td>iPhone 14 Proä»¥é™</td>
                        </tr>
                        <tr>
                            <td><strong>DAIN (æ·±åº¦å¯¾å¿œ)</strong></td>
                            <td>æœ€é«˜</td>
                            <td>âš¡</td>
                            <td>iPhone 15 Proä»¥é™</td>
                        </tr>
                    </table>

                    <div style="margin-top: 15px; padding: 10px; background: rgba(245, 158, 11, 0.1); border-radius: 6px;">
                        <strong>å®Ÿè£…ã‚³ãƒ³ã‚»ãƒ—ãƒˆ:</strong>
                        <div class="code-block" style="margin-top: 8px; font-size: 0.85em;">
<span class="keyword">if</span> videoOutput.<span class="function">hasNewPixelBuffer</span>(...) {
    <span class="comment">// æ–°ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—</span>
    currentFrame = videoOutput.<span class="function">copyPixelBuffer</span>(...)
} <span class="keyword">else if</span> enable120HzInterpolation {
    <span class="comment">// 120Hzã§ä¸­é–“ãƒ•ãƒ¬ãƒ¼ãƒ ç”Ÿæˆ</span>
    interpolated = frameInterpolator.<span class="function">interpolate</span>(
        previousFrame, currentFrame, alpha: <span class="string">0.5</span>
    )
}
                        </div>
                    </div>

                    <div style="margin-top: 12px; padding: 10px; background: rgba(220, 38, 38, 0.1); border-radius: 6px;">
                        <strong>âš ï¸ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿:</strong><br>
                        â€¢ GPUä½¿ç”¨ç‡: +40-60%<br>
                        â€¢ æ¶ˆè²»é›»åŠ›: +30-50%<br>
                        â€¢ ãƒãƒƒãƒ†ãƒªãƒ¼é§†å‹•æ™‚ã¯60Hzã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆæ¨å¥¨
                    </div>
                </div>
                <div class="card">
                    <h3><span class="icon">ğŸ®</span> ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–VR</h3>
                    <p>ã‚¸ãƒ£ã‚¤ãƒ­ã‚»ãƒ³ã‚µãƒ¼ã«ã‚ˆã‚‹VRè¦–ç‚¹åˆ¶å¾¡ã€‚ãƒ”ãƒ³ãƒã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼ã§FOVèª¿æ•´ã€‚</p>
                    <div style="margin-top: 15px; padding: 10px; background: rgba(139, 92, 246, 0.1); border-radius: 6px;">
                        <strong>æŠ€è¡“:</strong> CMMotionManagerã€UIGestureRecognizeré€£æº
                    </div>
                </div>
            </div>
        </section>

        <!-- Key Technologies -->
        <section class="section animate-in" style="animation-delay: 1.5s;">
            <h2><span class="icon">ğŸ’¡</span> ä½¿ç”¨ã—ã¦ã„ã‚‹ä¸»è¦æŠ€è¡“ã®è©³ç´°</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                <div class="card">
                    <h3>CVMetalTextureCache</h3>
                    <p>Core Videoã¨Metalã®æ©‹æ¸¡ã—ã€‚ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ã§ãƒ”ã‚¯ã‚»ãƒ«ãƒãƒƒãƒ•ã‚¡ã‚’GPUãƒ†ã‚¯ã‚¹ãƒãƒ£ã«å¤‰æ›ã€‚</p>
                    <div class="code-block" style="margin-top: 10px;">
CVMetalTextureCacheCreateTextureFromImage(
    <span class="type">kCFAllocatorDefault</span>,
    textureCache,
    pixelBuffer,
    <span class="type">nil</span>,
    .bgra8Unorm,
    width, height,
    <span class="string">0</span>,
    &cvMetalTexture
)
                    </div>
                </div>

                <div class="card">
                    <h3>Metal Compute Pipeline</h3>
                    <p>GPUã§ã®æ±ç”¨è¨ˆç®—ã€‚Compute Shaderã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒ»å®Ÿè¡Œã™ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã€‚</p>
                    <div class="code-block" style="margin-top: 10px;">
<span class="keyword">let</span> pipeline = device.<span class="function">makeComputePipelineState</span>(
    function: library.<span class="function">makeFunction</span>(name: <span class="string">"bicubicUpscale"</span>)
)
encoder.<span class="function">setComputePipelineState</span>(pipeline)
encoder.<span class="function">dispatchThreadgroups</span>(...)
                    </div>
                </div>

                <div class="card">
                    <h3>CADisplayLink</h3>
                    <p>ç”»é¢ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ¬ãƒ¼ãƒˆï¼ˆ60Hz/120Hzï¼‰ã«åŒæœŸã—ãŸã‚¿ã‚¤ãƒãƒ¼ã€‚</p>
                    <div class="code-block" style="margin-top: 10px;">
displayLink = <span class="type">CADisplayLink</span>(
    target: <span class="keyword">self</span>,
    selector: <span class="type">#selector</span>(displayLinkCallback)
)
displayLink.<span class="function">add</span>(to: .<span class="string">main</span>, forMode: .<span class="string">common</span>)
                    </div>
                </div>

                <div class="card">
                    <h3>AVPlayerItemVideoOutput</h3>
                    <p>AVPlayerã‹ã‚‰å„ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’CVPixelBufferã¨ã—ã¦å–å¾—ã€‚Metaläº’æ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®šå¯èƒ½ã€‚</p>
                    <div class="code-block" style="margin-top: 10px;">
<span class="keyword">let</span> output = <span class="type">AVPlayerItemVideoOutput</span>(
    outputSettings: [
        <span class="type">kCVPixelBufferPixelFormatTypeKey</span>: <span class="type">kCVPixelFormatType_32BGRA</span>,
        <span class="type">kCVPixelBufferMetalCompatibilityKey</span>: <span class="keyword">true</span>
    ]
)
                    </div>
                </div>
            </div>
        </section>

        <!-- Code Examples -->
        <section class="section animate-in" style="animation-delay: 1.6s;">
            <h2><span class="icon">ğŸ“</span> ã‚³ãƒ¼ãƒ‰ä¾‹: ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ã®å®Ÿè£…</h2>

            <h3 style="margin-bottom: 15px;">æœ€é©åŒ–å‰ vs æœ€é©åŒ–å¾Œ</h3>

            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <h4 style="color: #e74c3c;">âŒ æœ€é©åŒ–å‰ï¼ˆå•é¡Œã‚ã‚Šï¼‰</h4>
                    <div class="code-block">
<span class="keyword">func</span> <span class="function">renderFrame</span>(pixelBuffer: <span class="type">CVPixelBuffer</span>) {
    <span class="keyword">let</span> texture = <span class="function">createTexture</span>(pixelBuffer)

    <span class="comment">// æ¯ãƒ•ãƒ¬ãƒ¼ãƒ æ–°è¦ãƒ†ã‚¯ã‚¹ãƒãƒ£ä½œæˆ âŒ</span>
    <span class="keyword">let</span> outputTexture = <span class="function">createNewTexture</span>(size)

    <span class="comment">// åŒæœŸçš„ã«GPUå‡¦ç†ã‚’å¾…æ©Ÿ âŒ</span>
    commandBuffer.<span class="function">commit</span>()
    commandBuffer.<span class="function">waitUntilCompleted</span>()

    <span class="comment">// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼OFFã§ã‚‚å‡¦ç†å®Ÿè¡Œ âŒ</span>
    <span class="function">applyFilters</span>(texture)

    <span class="comment">// æ¯ãƒ•ãƒ¬ãƒ¼ãƒ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ âŒ</span>
    <span class="function">CVMetalTextureCacheFlush</span>(cache, <span class="string">0</span>)
}
                    </div>
                </div>

                <div>
                    <h4 style="color: var(--secondary);">âœ… æœ€é©åŒ–å¾Œï¼ˆé«˜é€Ÿï¼‰</h4>
                    <div class="code-block">
<span class="keyword">func</span> <span class="function">renderFrame</span>(pixelBuffer: <span class="type">CVPixelBuffer</span>) {
    <span class="keyword">let</span> texture = <span class="function">createTexture</span>(pixelBuffer)

    <span class="comment">// Fast Path: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä¸è¦æ™‚ã¯ã‚¹ã‚­ãƒƒãƒ— âœ…</span>
    <span class="keyword">if</span> !needsProcessing {
        currentTexture = texture
        <span class="keyword">return</span>
    }

    <span class="comment">// ãƒ†ã‚¯ã‚¹ãƒãƒ£å†åˆ©ç”¨ âœ…</span>
    <span class="keyword">let</span> outputTexture = <span class="function">reuseTexture</span>(size)

    <span class="comment">// éåŒæœŸå®Ÿè¡Œï¼ˆGPUä¸¦åˆ—åŒ–ï¼‰ âœ…</span>
    commandBuffer.<span class="function">commit</span>()
    <span class="comment">// waitUntilCompleted() ã‚’å‰Šé™¤ âœ…</span>

    <span class="comment">// 120ãƒ•ãƒ¬ãƒ¼ãƒ ã”ã¨ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ âœ…</span>
    <span class="keyword">if</span> frameCount % <span class="string">120</span> == <span class="string">0</span> {
        <span class="function">CVMetalTextureCacheFlush</span>(cache, <span class="string">0</span>)
    }
}
                    </div>
                </div>
            </div>

            <div style="margin-top: 20px; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 8px; border-left: 4px solid var(--secondary);">
                <strong>æ€§èƒ½å‘ä¸Š:</strong> ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆ 25fps â†’ 60fpsï¼ˆ240%æ”¹å–„ï¼‰ã€CPUä½¿ç”¨ç‡ 85% â†’ 45%
            </div>
        </section>

        <!-- Interactive Demo -->
        <section class="section animate-in" style="animation-delay: 1.7s;">
            <h2><span class="icon">ğŸ®</span> ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ‡ãƒ¢</h2>

            <div class="card">
                <h3>GPUå‡¦ç†ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h3>
                <p>ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å‡¦ç†ãƒ•ãƒ­ãƒ¼ã‚’ç¢ºèª</p>

                <div style="margin: 20px 0;">
                    <button onclick="runSimulation()" style="background: var(--primary); color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1em; cursor: pointer; transition: transform 0.2s;">
                        â–¶ å‡¦ç†ã‚’é–‹å§‹
                    </button>
                    <button onclick="resetSimulation()" style="background: var(--bg-light); color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 1em; cursor: pointer; margin-left: 10px;">
                        ğŸ”„ ãƒªã‚»ãƒƒãƒˆ
                    </button>
                </div>

                <div id="simulation-display" style="background: #1a1a2e; padding: 30px; border-radius: 8px; min-height: 200px; display: flex; align-items: center; justify-content: space-around; flex-wrap: wrap;">
                    <div id="sim-video" class="sim-box" style="opacity: 0.3;">
                        <div style="font-size: 3em;">ğŸ¥</div>
                        <div>å‹•ç”»ãƒ•ãƒ¬ãƒ¼ãƒ </div>
                    </div>
                    <div style="font-size: 2em; opacity: 0.3;">â†’</div>
                    <div id="sim-buffer" class="sim-box" style="opacity: 0.3;">
                        <div style="font-size: 3em;">ğŸ–¼ï¸</div>
                        <div>PixelBuffer</div>
                    </div>
                    <div style="font-size: 2em; opacity: 0.3;">â†’</div>
                    <div id="sim-gpu" class="sim-box" style="opacity: 0.3;">
                        <div style="font-size: 3em;">âš¡</div>
                        <div>GPUå‡¦ç†</div>
                    </div>
                    <div style="font-size: 2em; opacity: 0.3;">â†’</div>
                    <div id="sim-display" class="sim-box" style="opacity: 0.3;">
                        <div style="font-size: 3em;">ğŸ“±</div>
                        <div>ç”»é¢è¡¨ç¤º</div>
                    </div>
                </div>

                <div id="simulation-log" style="margin-top: 20px; background: #1a1a2e; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.9em; max-height: 200px; overflow-y: auto;">
                    <div style="color: var(--text-muted);">å‡¦ç†ãƒ­ã‚°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>
                </div>
            </div>
        </section>

        <!-- Best Practices -->
        <section class="section animate-in" style="animation-delay: 1.8s;">
            <h2><span class="icon">ğŸ“š</span> ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹</h2>

            <div class="cards">
                <div class="card">
                    <h3><span class="icon">âœ…</span> æ¨å¥¨äº‹é …</h3>
                    <ul style="line-height: 2;">
                        <li>ğŸ“Œ Fast Pathãƒã‚§ãƒƒã‚¯ã‚’å¿…ãšå®Ÿè£…</li>
                        <li>ğŸ“Œ ãƒ†ã‚¯ã‚¹ãƒãƒ£ã¯ãƒ—ãƒ¼ãƒ«ã—ã¦å†åˆ©ç”¨</li>
                        <li>ğŸ“Œ waitUntilCompleted()ã¯é¿ã‘ã‚‹</li>
                        <li>ğŸ“Œ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ©ãƒƒã‚·ãƒ¥ã¯æ§ãˆã‚ã«</li>
                        <li>ğŸ“Œ ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯ç”¨é€”ã«å¿œã˜ã¦é¸æŠ</li>
                    </ul>
                </div>
                <div class="card">
                    <h3><span class="icon">âŒ</span> ã‚¢ãƒ³ãƒãƒ‘ã‚¿ãƒ¼ãƒ³</h3>
                    <ul style="line-height: 2;">
                        <li>âš ï¸ æ¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’æ–°è¦ä½œæˆ</li>
                        <li>âš ï¸ GPUå‡¦ç†ã‚’åŒæœŸçš„ã«å¾…æ©Ÿ</li>
                        <li>âš ï¸ ä¸è¦ãªå‡¦ç†ã‚’å¸¸ã«å®Ÿè¡Œ</li>
                        <li>âš ï¸ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’æ¯ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ•ãƒ©ãƒƒã‚·ãƒ¥</li>
                        <li>âš ï¸ éå‰°ãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- References -->
        <section class="section animate-in" style="animation-delay: 1.9s;">
            <h2><span class="icon">ğŸ“–</span> å‚è€ƒè³‡æ–™</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                <a href="https://developer.apple.com/metal/" target="_blank" style="text-decoration: none;">
                    <div class="card" style="cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s;">
                        <h4 style="color: var(--primary);">Metal Documentation</h4>
                        <p style="color: var(--text-muted); font-size: 0.9em;">Appleå…¬å¼ã®Metalãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</p>
                    </div>
                </a>
                <a href="https://developer.apple.com/documentation/accelerate/metal_performance_shaders" target="_blank" style="text-decoration: none;">
                    <div class="card" style="cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s;">
                        <h4 style="color: var(--primary);">Metal Performance Shaders</h4>
                        <p style="color: var(--text-muted); font-size: 0.9em;">MPSã®å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</p>
                    </div>
                </a>
                <a href="https://developer.apple.com/av-foundation/" target="_blank" style="text-decoration: none;">
                    <div class="card" style="cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s;">
                        <h4 style="color: var(--primary);">AVFoundation</h4>
                        <p style="color: var(--text-muted); font-size: 0.9em;">å‹•ç”»å‡¦ç†ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯</p>
                    </div>
                </a>
                <a href="https://github.com/bloc97/Anime4K" target="_blank" style="text-decoration: none;">
                    <div class="card" style="cursor: pointer; border: 2px solid transparent; transition: border-color 0.3s;">
                        <h4 style="color: var(--primary);">Anime4K</h4>
                        <p style="color: var(--text-muted); font-size: 0.9em;">ã‚¢ãƒ‹ãƒ¡å‘ã‘ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </p>
                    </div>
                </a>
            </div>
        </section>

        <!-- Quick Reference -->
        <section class="section animate-in" style="animation-delay: 2.0s;">
            <h2><span class="icon">âš¡</span> ã‚¯ã‚¤ãƒƒã‚¯ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h2>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <div style="background: var(--bg-light); padding: 20px; border-radius: 8px;">
                    <h4 style="color: var(--primary); margin-bottom: 10px;">ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«</h4>
                    <div style="font-family: monospace; font-size: 0.85em; line-height: 1.8;">
                        <div>ğŸ“„ MetalVideoRenderer.swift</div>
                        <div>ğŸ“„ UpscalingEngine.swift</div>
                        <div>ğŸ“„ MetalUpscaler.swift</div>
                        <div>ğŸ“„ Upscaling.metal</div>
                    </div>
                </div>

                <div style="background: var(--bg-light); padding: 20px; border-radius: 8px;">
                    <h4 style="color: var(--secondary); margin-bottom: 10px;">ä¸»è¦ã‚¯ãƒ©ã‚¹</h4>
                    <div style="font-family: monospace; font-size: 0.85em; line-height: 1.8;">
                        <div>VideoPlayerController</div>
                        <div>MetalVideoRenderer</div>
                        <div>UpscalingEngine</div>
                        <div>MPSUpscaler</div>
                    </div>
                </div>

                <div style="background: var(--bg-light); padding: 20px; border-radius: 8px;">
                    <h4 style="color: var(--accent); margin-bottom: 10px;">ä¸»è¦é–¢æ•°</h4>
                    <div style="font-family: monospace; font-size: 0.85em; line-height: 1.8;">
                        <div>renderFrame()</div>
                        <div>upscaleTexture()</div>
                        <div>applyAnimeEnhance()</div>
                        <div>createTexture()</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Guide -->
        <section class="section animate-in" style="animation-delay: 2.1s;">
            <h2><span class="icon">âš™ï¸</span> è¨­å®šã‚¬ã‚¤ãƒ‰ - å„è¨­å®šãŒå‹•ç”»ã«ä¸ãˆã‚‹å½±éŸ¿</h2>

            <!-- Critical Warning -->
            <div style="background: rgba(220, 38, 38, 0.15); border: 2px solid #dc2626; border-radius: 12px; padding: 20px; margin-bottom: 30px;">
                <h3 style="color: #dc2626; margin-bottom: 10px;">âš ï¸ é‡è¦: ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã®æœ‰åŠ¹åŒ–æ¡ä»¶</h3>
                <p style="margin-bottom: 15px;">ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°å‡¦ç†ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€<strong style="color: #dc2626;">ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹ã€ã‚’ON</strong>ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
                <div class="code-block" style="margin-top: 10px;">
<span class="comment">// MetalVideoRenderer.swift:134</span>
<span class="keyword">let</span> needsUpscaling = upscalingEngine.<span class="type">upscalingEnabled</span>
                    && upscalingEngine.settings.<span class="type">animeFilterSettings.enabled</span>

<span class="comment">// ã¤ã¾ã‚Š: ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŒå‹•ä½œã™ã‚‹ã«ã¯ä¸¡æ–¹ãŒtrueã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹</span>
<span class="comment">// 1. upscalingEnabled = true (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§true)</span>
<span class="comment">// 2. animeFilterSettings.enabled = true (è¨­å®šç”»é¢ã§ã€Œãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹ã€ã‚’ON)</span>
                </div>
                <p style="margin-top: 15px; color: var(--accent);">ğŸ’¡ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åŠ¹æœãŒä¸è¦ã§ã‚‚ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã ã‘ä½¿ã„ãŸã„å ´åˆã¯ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ONã«ã—ã¦ãƒ—ãƒªã‚»ãƒƒãƒˆã‚’ã€ŒSoftã€ã«è¨­å®šã™ã‚‹ã¨åŠ¹æœãŒæ§ãˆã‚ã«ãªã‚Šã¾ã™ã€‚</p>
            </div>

            <!-- Processing Pipeline -->
            <h3 style="margin-bottom: 20px;">å‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆé©ç”¨é †åºï¼‰</h3>
            <div style="display: flex; flex-wrap: wrap; align-items: center; justify-content: center; gap: 10px; background: #1a1a2e; padding: 30px; border-radius: 12px; margin-bottom: 30px;">
                <div style="text-align: center; padding: 15px 20px; background: rgba(99, 102, 241, 0.2); border-radius: 8px; border: 2px solid var(--primary);">
                    <div style="font-size: 1.5em;">ğŸ¥</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">å…ƒãƒ•ãƒ¬ãƒ¼ãƒ </div>
                </div>
                <div style="font-size: 1.5em; color: var(--text-muted);">â†’</div>
                <div style="text-align: center; padding: 15px 20px; background: rgba(16, 185, 129, 0.2); border-radius: 8px; border: 2px solid var(--secondary);">
                    <div style="font-size: 1.5em;">ğŸ”</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«</div>
                    <div style="font-size: 0.7em; color: var(--accent);">+ Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</div>
                </div>
                <div style="font-size: 1.5em; color: var(--text-muted);">â†’</div>
                <div style="text-align: center; padding: 15px 20px; background: rgba(245, 158, 11, 0.2); border-radius: 8px; border: 2px solid var(--accent);">
                    <div style="font-size: 1.5em;">ğŸ¨</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">æ˜åº¦/ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</div>
                    <div style="font-size: 0.7em; color: var(--text-muted);">å½©åº¦/è¼åº¦</div>
                </div>
                <div style="font-size: 1.5em; color: var(--text-muted);">â†’</div>
                <div style="text-align: center; padding: 15px 20px; background: rgba(139, 92, 246, 0.2); border-radius: 8px; border: 2px solid #8b5cf6;">
                    <div style="font-size: 1.5em;">âœ¨</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">Vibrance</div>
                </div>
                <div style="font-size: 1.5em; color: var(--text-muted);">â†’</div>
                <div style="text-align: center; padding: 15px 20px; background: rgba(236, 72, 153, 0.2); border-radius: 8px; border: 2px solid #ec4899;">
                    <div style="font-size: 1.5em;">ğŸï¸</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">Film Grain</div>
                </div>
                <div style="font-size: 1.5em; color: var(--text-muted);">â†’</div>
                <div style="text-align: center; padding: 15px 20px; background: rgba(99, 102, 241, 0.2); border-radius: 8px; border: 2px solid var(--primary);">
                    <div style="font-size: 1.5em;">ğŸ“±</div>
                    <div style="font-size: 0.9em; margin-top: 5px;">è¡¨ç¤º</div>
                </div>
            </div>

            <!-- Settings Categories -->
            <div class="tabs" style="margin-bottom: 20px;">
                <button class="tab active" onclick="showSettingsTab('filter')">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼è¨­å®š</button>
                <button class="tab" onclick="showSettingsTab('algorithm')">ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </button>
                <button class="tab" onclick="showSettingsTab('quality')">ç”»è³ªèª¿æ•´</button>
                <button class="tab" onclick="showSettingsTab('postprocess')">å¾Œå‡¦ç†</button>
            </div>

            <!-- Filter Settings Tab -->
            <div id="settings-filter" class="tab-content active">
                <h3>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹ & ãƒ—ãƒªã‚»ãƒƒãƒˆ</h3>

                <div class="cards" style="margin-top: 20px;">
                    <div class="card">
                        <h4 style="color: var(--secondary);">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æœ‰åŠ¹ (Filter Enable)</h4>
                        <p><strong>ãƒã‚¹ã‚¿ãƒ¼ã‚¹ã‚¤ãƒƒãƒ</strong> - ã“ã‚Œã‚’ONã«ã—ãªã„ã¨ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ãŒå‹•ä½œã—ã¾ã›ã‚“ã€‚</p>
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            <strong>ON:</strong> ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚° + Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨<br>
                            <strong>OFF:</strong> å…ƒã®å‹•ç”»ã‚’ãã®ã¾ã¾è¡¨ç¤ºï¼ˆFast Pathï¼‰
                        </div>
                    </div>

                    <div class="card">
                        <h4 style="color: var(--primary);">ãƒ—ãƒªã‚»ãƒƒãƒˆ (Preset)</h4>
                        <table style="width: 100%; margin-top: 10px; font-size: 0.9em;">
                            <tr>
                                <th>ãƒ—ãƒªã‚»ãƒƒãƒˆ</th>
                                <th>ç·šå¼·èª¿</th>
                                <th>ç·šç´°åŒ–</th>
                                <th>ãƒã‚¤ã‚ºé™¤å»</th>
                                <th>è‰²å½©å¼·èª¿</th>
                            </tr>
                            <tr>
                                <td><strong>Standard</strong></td>
                                <td>50%</td>
                                <td>40%</td>
                                <td>50%</td>
                                <td>30%</td>
                            </tr>
                            <tr>
                                <td><strong>Soft</strong></td>
                                <td>30%</td>
                                <td>20%</td>
                                <td>70%</td>
                                <td>20%</td>
                            </tr>
                            <tr>
                                <td><strong>Sharp</strong></td>
                                <td>70%</td>
                                <td>60%</td>
                                <td>30%</td>
                                <td>40%</td>
                            </tr>
                            <tr>
                                <td><strong>Strong</strong></td>
                                <td>90%</td>
                                <td>80%</td>
                                <td>20%</td>
                                <td>60%</td>
                            </tr>
                        </table>
                    </div>
                </div>

                <h4 style="margin-top: 25px; margin-bottom: 15px;">è©³ç´°èª¿æ•´ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼</h4>
                <div class="cards">
                    <div class="card">
                        <h4><span style="color: #e74c3c;">â—</span> ç·šç”»å¼·èª¿ (Line Darken)</h4>
                        <p>ã‚¢ãƒ‹ãƒ¡ã®è¼ªéƒ­ç·šã‚’æ¤œå‡ºã—ã€ã‚ˆã‚Šæš—ãï¼ˆæ¿ƒãï¼‰ã—ã¾ã™ã€‚</p>
                        <div style="display: flex; gap: 20px; margin-top: 15px;">
                            <div style="flex: 1; text-align: center;">
                                <div style="background: #2a2a3e; padding: 20px; border-radius: 8px;">
                                    <div style="font-size: 0.8em; color: var(--text-muted);">å¼± (0%)</div>
                                    <div style="margin: 10px 0; height: 40px; display: flex; align-items: center; justify-content: center;">
                                        <div style="width: 60px; height: 2px; background: #888;"></div>
                                    </div>
                                    <div style="font-size: 0.75em;">è–„ã„ç·š</div>
                                </div>
                            </div>
                            <div style="flex: 1; text-align: center;">
                                <div style="background: #2a2a3e; padding: 20px; border-radius: 8px;">
                                    <div style="font-size: 0.8em; color: var(--text-muted);">å¼· (100%)</div>
                                    <div style="margin: 10px 0; height: 40px; display: flex; align-items: center; justify-content: center;">
                                        <div style="width: 60px; height: 4px; background: #000;"></div>
                                    </div>
                                    <div style="font-size: 0.75em;">ãã£ãã‚Šã—ãŸç·š</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h4><span style="color: #3498db;">â—</span> ç·šç”»ç´°ç·šåŒ– (Line Thin)</h4>
                        <p>å¤ªã„ç·šã‚’ç´°ãã—ã¦ã‚·ãƒ£ãƒ¼ãƒ—ãªå°è±¡ã«ã€‚é«˜è§£åƒåº¦å‘ã‘ã€‚</p>
                        <div style="background: rgba(52, 152, 219, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            <strong>æ¨å¥¨:</strong> 4Kä»¥ä¸Šã®é«˜è§£åƒåº¦ã§ã¯40-60%ã€1080pã§ã¯20-40%
                        </div>
                    </div>

                    <div class="card">
                        <h4><span style="color: #9b59b6;">â—</span> ãƒã‚¤ã‚ºé™¤å» (Denoise)</h4>
                        <p>ã‚¨ãƒƒã‚¸ã‚’ä¿æŒã—ãªãŒã‚‰å¹³å¦éƒ¨åˆ†ã®ãƒã‚¤ã‚ºã‚’é™¤å»ï¼ˆBilateral Filterï¼‰ã€‚</p>
                        <div style="background: rgba(155, 89, 182, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            <strong>æ³¨æ„:</strong> é«˜ã™ãã‚‹ã¨ç´°ã‹ã„ãƒ‡ã‚£ãƒ†ãƒ¼ãƒ«ãŒå¤±ã‚ã‚Œã¾ã™
                        </div>
                    </div>

                    <div class="card">
                        <h4><span style="color: #2ecc71;">â—</span> è‰²å½©å¼·èª¿ (Color Boost)</h4>
                        <p>ã‚¢ãƒ‹ãƒ¡ã®å¹³å¦ãªå¡—ã‚Šéƒ¨åˆ†ã®å½©åº¦ã‚’ä¸Šã’ã¦é®®ã‚„ã‹ã«ã€‚</p>
                        <div style="display: flex; gap: 10px; margin-top: 15px;">
                            <div style="flex: 1; height: 30px; background: linear-gradient(to right, #888, #aaa); border-radius: 4px;"></div>
                            <div style="font-size: 1.5em;">â†’</div>
                            <div style="flex: 1; height: 30px; background: linear-gradient(to right, #4a90d9, #7cb3f0); border-radius: 4px;"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Algorithm Tab -->
            <div id="settings-algorithm" class="tab-content">
                <h3>ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </h3>
                <p style="margin-bottom: 20px;">å‹•ç”»ã®ç¨®é¡ã¨æ±‚ã‚ã‚‹å“è³ªã«å¿œã˜ã¦é¸æŠã—ã¦ãã ã•ã„ã€‚</p>

                <div style="overflow-x: auto;">
                    <table>
                        <tr>
                            <th>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ </th>
                            <th>å‡¦ç†æ–¹å¼</th>
                            <th>ç‰¹å¾´</th>
                            <th>æ¨å¥¨ç”¨é€”</th>
                            <th>GPUè² è·</th>
                        </tr>
                        <tr>
                            <td><strong>Bilinear</strong></td>
                            <td>2Ã—2ãƒ”ã‚¯ã‚»ãƒ«è£œé–“</td>
                            <td>æœ€é€Ÿã€ã¼ã‚„ã‘ã‚‹</td>
                            <td>ãƒãƒƒãƒ†ãƒªãƒ¼ç¯€ç´„æ™‚</td>
                            <td><div style="background: var(--secondary); width: 20%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>Bicubic</strong></td>
                            <td>4Ã—4ãƒ”ã‚¯ã‚»ãƒ«è£œé–“</td>
                            <td>ãƒãƒ©ãƒ³ã‚¹å‹</td>
                            <td>ä¸€èˆ¬çš„ãªå‹•ç”»</td>
                            <td><div style="background: var(--secondary); width: 40%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>Lanczos</strong></td>
                            <td>6Ã—6 Sincé–¢æ•°è£œé–“</td>
                            <td>é«˜å“è³ªã€ã‚·ãƒ£ãƒ¼ãƒ—</td>
                            <td>å®Ÿå†™ã€å†™çœŸ</td>
                            <td><div style="background: var(--secondary); width: 60%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>MPS</strong></td>
                            <td>Metal Performance Shaders</td>
                            <td>Appleæœ€é©åŒ–</td>
                            <td>æ±ç”¨</td>
                            <td><div style="background: var(--secondary); width: 50%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>Anime4K</strong></td>
                            <td>Lanczos + Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</td>
                            <td>ã‚¢ãƒ‹ãƒ¡ç‰¹åŒ–</td>
                            <td>ã‚¢ãƒ‹ãƒ¡ã€ã‚¤ãƒ©ã‚¹ãƒˆ</td>
                            <td><div style="background: var(--accent); width: 75%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>MLSR (AI)</strong></td>
                            <td>Core ML æ©Ÿæ¢°å­¦ç¿’</td>
                            <td>æœ€é«˜å“è³ª</td>
                            <td>é™æ­¢ç”»ã€ã‚¹ãƒ­ãƒ¼ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³</td>
                            <td><div style="background: var(--accent); width: 90%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                        <tr>
                            <td><strong>Adaptive</strong></td>
                            <td>è‡ªå‹•é¸æŠ</td>
                            <td>ã‚¹ã‚±ãƒ¼ãƒ«ç‡ã§åˆ‡æ›¿</td>
                            <td>æ§˜ã€…ãªè§£åƒåº¦</td>
                            <td><div style="background: var(--primary); width: 60%; height: 16px; border-radius: 4px;"></div></td>
                        </tr>
                    </table>
                </div>

                <div class="code-block" style="margin-top: 20px;">
<span class="comment">// ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é¸æŠãƒ­ã‚¸ãƒƒã‚¯ (UpscalingEngine.swift)</span>
<span class="keyword">switch</span> settings.algorithm {
<span class="keyword">case</span> .bilinear, .bicubic, .lanczos:
    result = mpsUpscaler?.<span class="function">upscale</span>(..., algorithm: settings.algorithm)

<span class="keyword">case</span> .anime4k:
    <span class="comment">// Lanczosã§ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«å¾Œã€Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’é©ç”¨</span>
    result = mpsUpscaler?.<span class="function">upscale</span>(..., algorithm: .lanczos)
    <span class="comment">// â†’ ãã®å¾Œ metalUpscaler?.applyAnimeEnhance() ãŒå‘¼ã°ã‚Œã‚‹</span>

<span class="keyword">case</span> .mlsr:
    result = coreMLUpscaler?.<span class="function">upscale</span>(...) ?? <span class="comment">/* fallback to Lanczos */</span>
}
                </div>
            </div>

            <!-- Quality Tab -->
            <div id="settings-quality" class="tab-content">
                <h3>ç”»è³ªè¨­å®š</h3>
                <p style="margin-bottom: 20px;">ã“ã‚Œã‚‰ã®è¨­å®šã¯<strong style="color: var(--secondary);">ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼OFFã§ã‚‚é©ç”¨</strong>ã•ã‚Œã¾ã™ï¼ˆç‹¬ç«‹ã—ãŸå‡¦ç†ï¼‰ã€‚</p>

                <div class="cards">
                    <div class="card">
                        <h4>â˜€ï¸ æ˜åº¦ (Brightness)</h4>
                        <p>æ˜ åƒå…¨ä½“ã®æ˜ã‚‹ã•ã‚’èª¿æ•´ã€‚æš—ã„ã‚·ãƒ¼ãƒ³ã‚’è¦‹ã‚„ã™ãã—ãŸã‚Šã€çœ©ã—ã•ã‚’è»½æ¸›ã€‚</p>
                        <div style="display: flex; align-items: center; gap: 15px; margin-top: 15px;">
                            <div style="width: 50px; height: 50px; background: #333; border-radius: 8px;"></div>
                            <input type="range" style="flex: 1;" disabled>
                            <div style="width: 50px; height: 50px; background: #fff; border-radius: 8px;"></div>
                        </div>
                        <div style="font-size: 0.85em; color: var(--text-muted); margin-top: 10px;">
                            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 0ï¼ˆå¤‰åŒ–ãªã—ï¼‰ã€ç¯„å›²: -1.0 ã€œ +1.0
                        </div>
                    </div>

                    <div class="card">
                        <h4>â— ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ (Contrast)</h4>
                        <p>æ˜æš—ã®å·®ã‚’èª¿æ•´ã€‚é«˜ãã™ã‚‹ã¨ãƒ¡ãƒªãƒãƒªãŒå‡ºã‚‹ã€ä½ãã™ã‚‹ã¨æŸ”ã‚‰ã‹ã„å°è±¡ã«ã€‚</p>
                        <div style="display: flex; gap: 20px; margin-top: 15px;">
                            <div style="flex: 1; text-align: center;">
                                <div style="background: linear-gradient(#666, #999); height: 40px; border-radius: 4px;"></div>
                                <div style="font-size: 0.8em; margin-top: 5px;">ä½ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</div>
                            </div>
                            <div style="flex: 1; text-align: center;">
                                <div style="background: linear-gradient(#000, #fff); height: 40px; border-radius: 4px;"></div>
                                <div style="font-size: 0.8em; margin-top: 5px;">é«˜ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</div>
                            </div>
                        </div>
                        <div style="font-size: 0.85em; color: var(--text-muted); margin-top: 10px;">
                            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼ˆå¤‰åŒ–ãªã—ï¼‰ã€ç¯„å›²: 0.5 ã€œ 2.0
                        </div>
                    </div>

                    <div class="card">
                        <h4>ğŸ¨ å½©åº¦ (Saturation)</h4>
                        <p>è‰²ã®é®®ã‚„ã‹ã•ã‚’èª¿æ•´ã€‚0ã§ãƒ¢ãƒã‚¯ãƒ­ã€é«˜ãã™ã‚‹ã¨è‰²ãŒæ¿ƒããªã‚‹ã€‚</p>
                        <div style="display: flex; gap: 20px; margin-top: 15px;">
                            <div style="flex: 1; text-align: center;">
                                <div style="background: #888; height: 40px; border-radius: 4px;"></div>
                                <div style="font-size: 0.8em; margin-top: 5px;">ä½å½©åº¦</div>
                            </div>
                            <div style="flex: 1; text-align: center;">
                                <div style="background: linear-gradient(90deg, #ff4444, #44ff44, #4444ff); height: 40px; border-radius: 4px;"></div>
                                <div style="font-size: 0.8em; margin-top: 5px;">é«˜å½©åº¦</div>
                            </div>
                        </div>
                        <div style="font-size: 0.85em; color: var(--text-muted); margin-top: 10px;">
                            ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 1.0ï¼ˆå¤‰åŒ–ãªã—ï¼‰ã€ç¯„å›²: 0.0 ã€œ 2.0
                        </div>
                    </div>

                    <div class="card">
                        <h4>ğŸ”† ã‚·ãƒ£ãƒ¼ãƒ—ãƒã‚¹ (Sharpness)</h4>
                        <p>ã‚¨ãƒƒã‚¸ã‚’å¼·èª¿ã—ã¦ãã£ãã‚Šã—ãŸå°è±¡ã«ã€‚ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«å¾Œã«é©ç”¨ã™ã‚‹ã¨åŠ¹æœçš„ã€‚</p>
                        <div style="background: rgba(245, 158, 11, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            <strong>æ³¨æ„:</strong> é«˜ã™ãã‚‹ã¨ãƒã‚¤ã‚ºã‚„ãƒãƒ­ãƒ¼ï¼ˆç™½ã„ç¸å–ã‚Šï¼‰ãŒç›®ç«‹ã¤å ´åˆãŒã‚ã‚Šã¾ã™
                        </div>
                    </div>
                </div>

                <div style="margin-top: 25px; padding: 20px; background: rgba(99, 102, 241, 0.1); border-radius: 8px; border-left: 4px solid var(--primary);">
                    <h4 style="margin-bottom: 10px;">é©ç”¨æ¡ä»¶ï¼ˆã‚³ãƒ¼ãƒ‰ï¼‰</h4>
                    <div class="code-block">
<span class="comment">// MetalVideoRenderer.swift:135</span>
<span class="keyword">let</span> needsBrightness = brightness != <span class="string">0.0</span>
                    || contrast != <span class="string">1.0</span>
                    || saturation != <span class="string">1.0</span>

<span class="comment">// ã“ã‚Œã‚‰ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã¨ç•°ãªã‚‹å ´åˆã®ã¿å‡¦ç†ãŒå®Ÿè¡Œã•ã‚Œã‚‹</span>
<span class="comment">// ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ON/OFFã«é–¢ä¿‚ãªãç‹¬ç«‹ã—ã¦å‹•ä½œ</span>
                    </div>
                </div>
            </div>

            <!-- Post-processing Tab -->
            <div id="settings-postprocess" class="tab-content">
                <h3>å¾Œå‡¦ç†è¨­å®šï¼ˆPost-Processingï¼‰</h3>
                <p style="margin-bottom: 20px;">è¿½åŠ ã®ç”»è³ªå‘ä¸Šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã€‚ã“ã‚Œã‚‰ã¯UpscalingEngineçµŒç”±ã§å‡¦ç†ã•ã‚Œã¾ã™ã€‚</p>

                <div class="cards">
                    <div class="card">
                        <h4>ğŸ”ª ã‚·ãƒ£ãƒ¼ãƒ—ãƒã‚¹æœ‰åŠ¹ (Enable Sharpening)</h4>
                        <p>ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«å¾Œã«ã‚¨ãƒƒã‚¸å¼·èª¿ã‚’é©ç”¨ã€‚ã¼ã‚„ã‘ã‚’è»½æ¸›ã€‚</p>
                        <div style="margin-top: 15px;">
                            <strong>å‡¦ç†:</strong> Unsharp Mask ã¾ãŸã¯ Laplacian ã‚·ãƒ£ãƒ¼ãƒ—ãƒ‹ãƒ³ã‚°
                        </div>
                        <div style="background: rgba(16, 185, 129, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            âœ“ ä½è§£åƒåº¦ã‚½ãƒ¼ã‚¹ã®ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«æ™‚ã«åŠ¹æœçš„<br>
                            âœ“ ãƒ†ã‚­ã‚¹ãƒˆã‚„ç·šç”»ãŒãã£ãã‚Šã™ã‚‹
                        </div>
                    </div>

                    <div class="card">
                        <h4>ğŸŒ«ï¸ ãƒã‚¤ã‚ºé™¤å»æœ‰åŠ¹ (Enable Denoising)</h4>
                        <p>åœ§ç¸®ãƒã‚¤ã‚ºã‚„ã‚°ãƒ¬ã‚¤ãƒ³ã‚’é™¤å»ã€‚å¤ã„å‹•ç”»ã‚„ä½ãƒ“ãƒƒãƒˆãƒ¬ãƒ¼ãƒˆå‹•ç”»å‘ã‘ã€‚</p>
                        <div style="margin-top: 15px;">
                            <strong>å‡¦ç†:</strong> Temporal + Spatial ãƒ‡ãƒã‚¤ã‚º
                        </div>
                        <div style="background: rgba(245, 158, 11, 0.1); padding: 12px; border-radius: 6px; margin-top: 10px;">
                            âš ï¸ å¼·ã™ãã‚‹ã¨ã€Œã®ã£ãºã‚Šã€ã—ãŸå°è±¡ã«ãªã‚‹<br>
                            âš ï¸ æ„å›³çš„ãªãƒ•ã‚£ãƒ«ãƒ ã‚°ãƒ¬ã‚¤ãƒ³ã‚‚é™¤å»ã•ã‚Œã‚‹
                        </div>
                    </div>

                    <div class="card">
                        <h4>ã€°ï¸ ã‚¢ãƒ³ãƒã‚¨ã‚¤ãƒªã‚¢ã‚¹ (Enable Anti-Aliasing)</h4>
                        <p>æ–œã‚ç·šã‚„ã‚¨ãƒƒã‚¸ã®ã‚®ã‚¶ã‚®ã‚¶ï¼ˆã‚¸ãƒ£ã‚®ãƒ¼ï¼‰ã‚’æ»‘ã‚‰ã‹ã«ã€‚</p>
                        <div style="display: flex; gap: 20px; margin-top: 15px;">
                            <div style="flex: 1; text-align: center;">
                                <svg viewBox="0 0 60 60" style="max-width: 80px;">
                                    <line x1="10" y1="50" x2="50" y2="10" stroke="var(--text)" stroke-width="3"/>
                                </svg>
                                <div style="font-size: 0.8em;">OFF: ã‚®ã‚¶ã‚®ã‚¶</div>
                            </div>
                            <div style="flex: 1; text-align: center;">
                                <svg viewBox="0 0 60 60" style="max-width: 80px;">
                                    <line x1="10" y1="50" x2="50" y2="10" stroke="var(--text)" stroke-width="3" style="filter: blur(0.5px);"/>
                                </svg>
                                <div style="font-size: 0.8em;">ON: ã‚¹ãƒ ãƒ¼ã‚º</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div style="margin-top: 25px; padding: 20px; background: rgba(220, 38, 38, 0.1); border-radius: 8px; border-left: 4px solid #dc2626;">
                    <h4 style="color: #dc2626; margin-bottom: 10px;">âš ï¸ ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³</h4>
                    <p>ã“ã‚Œã‚‰ã®å¾Œå‡¦ç†ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯è¨­å®šUIã«å­˜åœ¨ã—ã¾ã™ãŒã€<strong>UpscalingSettings</strong>ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚</p>
                    <p style="margin-top: 10px;">å®Ÿéš›ã®å‡¦ç†ã¸ã®åæ˜ ã¯<strong>upscalingEngine.settings</strong>çµŒç”±ã§è¡Œã‚ã‚Œã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ãŒONã®å ´åˆã«ã®ã¿ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒ«å‡¦ç†ã¨ä¸€ç·’ã«é©ç”¨ã•ã‚Œã¾ã™ã€‚</p>
                </div>
            </div>

            <!-- Summary Table -->
            <h3 style="margin-top: 40px; margin-bottom: 20px;">è¨­å®šã¾ã¨ã‚: ä½•ãŒã„ã¤é©ç”¨ã•ã‚Œã‚‹ã‹</h3>
            <div style="overflow-x: auto;">
                <table>
                    <tr>
                        <th>è¨­å®šã‚«ãƒ†ã‚´ãƒª</th>
                        <th>è¨­å®šé …ç›®</th>
                        <th>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼OFFæ™‚</th>
                        <th>ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ONæ™‚</th>
                    </tr>
                    <tr>
                        <td rowspan="2"><strong>ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°</strong></td>
                        <td>ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ é¸æŠ</td>
                        <td style="color: #dc2626;">âŒ é©ç”¨ã•ã‚Œãªã„</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>Animeãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</td>
                        <td style="color: #dc2626;">âŒ é©ç”¨ã•ã‚Œãªã„</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td rowspan="4"><strong>ç”»è³ªèª¿æ•´</strong></td>
                        <td>æ˜åº¦ (Brightness)</td>
                        <td style="color: #10b981;">âœ… ç‹¬ç«‹ã—ã¦é©ç”¨</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆ</td>
                        <td style="color: #10b981;">âœ… ç‹¬ç«‹ã—ã¦é©ç”¨</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>å½©åº¦ (Saturation)</td>
                        <td style="color: #10b981;">âœ… ç‹¬ç«‹ã—ã¦é©ç”¨</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>Vibrance</td>
                        <td style="color: #10b981;">âœ… ç‹¬ç«‹ã—ã¦é©ç”¨</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td rowspan="3"><strong>å¾Œå‡¦ç†</strong></td>
                        <td>ã‚·ãƒ£ãƒ¼ãƒ—ãƒã‚¹æœ‰åŠ¹</td>
                        <td style="color: #f59e0b;">âš ï¸ è¨­å®šã®ã¿ä¿å­˜</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>ãƒã‚¤ã‚ºé™¤å»æœ‰åŠ¹</td>
                        <td style="color: #f59e0b;">âš ï¸ è¨­å®šã®ã¿ä¿å­˜</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td>ã‚¢ãƒ³ãƒã‚¨ã‚¤ãƒªã‚¢ã‚¹</td>
                        <td style="color: #f59e0b;">âš ï¸ è¨­å®šã®ã¿ä¿å­˜</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                    <tr>
                        <td><strong>ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ</strong></td>
                        <td>Film Grain</td>
                        <td style="color: #10b981;">âœ… ç‹¬ç«‹ã—ã¦é©ç”¨</td>
                        <td style="color: #10b981;">âœ… é©ç”¨ã•ã‚Œã‚‹</td>
                    </tr>
                </table>
            </div>
        </section>

        <!-- Footer -->
        <footer style="text-align: center; padding: 40px; color: var(--text-muted);">
            <p>UpscalePlayer Architecture Documentation</p>
            <p style="font-size: 0.9em; margin-top: 10px;">Generated with â¤ï¸ | Last Updated: 2026-01-23</p>
        </footer>
    </div>

    <script>
        // Show detail panel
        const details = {
            video: {
                title: 'ğŸ“ å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«',
                content: 'ã‚µãƒãƒ¼ãƒˆå½¢å¼: mp4, mov, mkv, avi, webm ãªã©ã€‚AVFoundationãŒå¯¾å¿œã™ã‚‹å…¨ã¦ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’å†ç”Ÿå¯èƒ½ã€‚'
            },
            avplayer: {
                title: 'â–¶ï¸ AVPlayer',
                content: 'Appleã®AVFoundationãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ä½¿ç”¨ã€‚ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ãƒ‡ã‚³ãƒ¼ãƒ€ãƒ¼ï¼ˆVideoToolboxï¼‰ã«ã‚ˆã‚ŠåŠ¹ç‡çš„ã«H.264/H.265/VP9ãªã©ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã€‚'
            },
            pixelbuffer: {
                title: 'ğŸ–¼ï¸ CVPixelBuffer',
                content: 'BGRA 32bitãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ãƒ”ã‚¯ã‚»ãƒ«ãƒãƒƒãƒ•ã‚¡ã€‚Metaläº’æ›ãƒ•ãƒ©ã‚°ã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ã€GPUå‡¦ç†ã¸ã®åŠ¹ç‡çš„ãªå—ã‘æ¸¡ã—ãŒå¯èƒ½ã€‚'
            },
            texture: {
                title: 'ğŸ”² MTLTexture',
                content: 'GPUãƒ¡ãƒ¢ãƒªä¸Šã®ãƒ†ã‚¯ã‚¹ãƒãƒ£ã€‚CVMetalTextureCacheã‚’ä½¿ç”¨ã—ã¦CVPixelBufferã‹ã‚‰ã‚¼ãƒ­ã‚³ãƒ”ãƒ¼ã§å¤‰æ›ã€‚'
            },
            gpu: {
                title: 'âš¡ GPUå‡¦ç†',
                content: 'Metal Compute Shaderã«ã‚ˆã‚‹ä¸¦åˆ—å‡¦ç†ã€‚ã‚¢ãƒƒãƒ—ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã€ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨ã€VRæŠ•å½±ãªã©ã‚’é«˜é€Ÿå®Ÿè¡Œã€‚'
            },
            display: {
                title: 'ğŸ“± ç”»é¢è¡¨ç¤º',
                content: 'MTKViewã‚’ä½¿ç”¨ã—ã¦60fpsã§è¡¨ç¤ºã€‚CADisplayLinkã«ã‚ˆã‚Šç”»é¢ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ¬ãƒ¼ãƒˆã«åŒæœŸã€‚'
            }
        };

        function showDetail(key) {
            const panel = document.getElementById('detail-panel');
            const title = document.getElementById('detail-title');
            const content = document.getElementById('detail-content');

            title.textContent = details[key].title;
            content.textContent = details[key].content;
            panel.style.display = 'block';
            panel.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById('tab-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Settings tab switching
        function showSettingsTab(tabName) {
            // Hide all settings tabs
            document.querySelectorAll('#settings-filter, #settings-algorithm, #settings-quality, #settings-postprocess').forEach(tab => {
                tab.classList.remove('active');
            });

            // Find the settings section and remove active class from tabs
            const settingsSection = document.querySelector('#settings-filter')?.closest('.section');
            if (settingsSection) {
                settingsSection.querySelectorAll('.tabs .tab').forEach(btn => {
                    btn.classList.remove('active');
                });
            }

            // Show selected tab
            const targetTab = document.getElementById('settings-' + tabName);
            if (targetTab) {
                targetTab.classList.add('active');
            }
            event.target.classList.add('active');
        }

        // Shader tab switching
        function showShaderTab(tabName) {
            // Hide all shader tabs
            document.querySelectorAll('#shader-bicubic, #shader-lanczos, #shader-anime, #shader-vr').forEach(tab => {
                tab.classList.remove('active');
            });

            // Remove active class from all shader tabs
            const shaderSection = event.target.closest('.section');
            shaderSection.querySelectorAll('.tab').forEach(btn => {
                btn.classList.remove('active');
            });

            // Show selected tab
            document.getElementById('shader-' + tabName).classList.add('active');
            event.target.classList.add('active');
        }

        // Intersection Observer for animations
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animationPlayState = 'running';
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.animate-in').forEach(el => {
            el.style.animationPlayState = 'paused';
            observer.observe(el);
        });

        // Simulation
        let simulationRunning = false;

        function runSimulation() {
            if (simulationRunning) return;
            simulationRunning = true;

            const log = document.getElementById('simulation-log');
            log.innerHTML = '';

            const steps = [
                { id: 'sim-video', name: 'å‹•ç”»ãƒ•ãƒ¬ãƒ¼ãƒ å–å¾—', delay: 0, duration: 500 },
                { id: 'sim-buffer', name: 'CVPixelBufferå¤‰æ›', delay: 500, duration: 300 },
                { id: 'sim-gpu', name: 'GPUå‡¦ç†å®Ÿè¡Œ', delay: 800, duration: 800 },
                { id: 'sim-display', name: 'ç”»é¢è¡¨ç¤º', delay: 1600, duration: 400 }
            ];

            function addLog(message, color = 'var(--text)') {
                const time = new Date().toLocaleTimeString();
                log.innerHTML += `<div style="color: ${color};">[${time}] ${message}</div>`;
                log.scrollTop = log.scrollHeight;
            }

            steps.forEach(step => {
                setTimeout(() => {
                    const el = document.getElementById(step.id);
                    el.style.opacity = '1';
                    el.style.transform = 'scale(1.1)';
                    el.style.transition = 'all 0.3s';
                    addLog(`âœ“ ${step.name}`, 'var(--secondary)');

                    setTimeout(() => {
                        el.style.transform = 'scale(1)';
                    }, 200);
                }, step.delay);
            });

            setTimeout(() => {
                addLog('â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•', 'var(--primary)');
                addLog('å‡¦ç†å®Œäº†: 16.67ms (60fps)', 'var(--accent)');
                addLog('CPU: 45% | GPU: 65% | ãƒ¡ãƒ¢ãƒª: 198MB', 'var(--text-muted)');
                simulationRunning = false;
            }, 2200);
        }

        function resetSimulation() {
            const boxes = document.querySelectorAll('.sim-box');
            boxes.forEach(box => {
                box.style.opacity = '0.3';
                box.style.transform = 'scale(1)';
            });
            document.getElementById('simulation-log').innerHTML = '<div style="color: var(--text-muted);">å‡¦ç†ãƒ­ã‚°ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™...</div>';
            simulationRunning = false;
        }

        // Add hover effects to reference cards
        document.querySelectorAll('a .card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.borderColor = 'var(--primary)';
            });
            card.addEventListener('mouseleave', function() {
                this.style.borderColor = 'transparent';
            });
        });

        // Add smooth scroll to top button
        window.addEventListener('scroll', function() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            // Create button if it doesn't exist
            let btn = document.getElementById('scroll-top-btn');
            if (!btn) {
                btn = document.createElement('button');
                btn.id = 'scroll-top-btn';
                btn.innerHTML = 'â†‘';
                btn.style.cssText = `
                    position: fixed;
                    bottom: 30px;
                    right: 30px;
                    width: 50px;
                    height: 50px;
                    border-radius: 50%;
                    background: var(--primary);
                    color: white;
                    border: none;
                    font-size: 1.5em;
                    cursor: pointer;
                    opacity: 0;
                    transition: opacity 0.3s;
                    z-index: 1000;
                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
                `;
                btn.onclick = function() {
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                };
                document.body.appendChild(btn);
            }

            btn.style.opacity = scrollTop > 300 ? '1' : '0';
        });

        // Add copy button to code blocks
        document.querySelectorAll('.code-block').forEach(block => {
            const btn = document.createElement('button');
            btn.innerHTML = 'ğŸ“‹';
            btn.style.cssText = `
                position: absolute;
                top: 10px;
                right: 10px;
                background: var(--bg-light);
                border: none;
                border-radius: 6px;
                padding: 8px 12px;
                cursor: pointer;
                opacity: 0;
                transition: opacity 0.3s;
                font-size: 1em;
            `;
            btn.title = 'ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼';

            block.style.position = 'relative';
            block.appendChild(btn);

            block.addEventListener('mouseenter', () => btn.style.opacity = '0.7');
            block.addEventListener('mouseleave', () => btn.style.opacity = '0');
            btn.addEventListener('mouseenter', () => btn.style.opacity = '1');

            btn.onclick = function() {
                const code = block.innerText.replace('ğŸ“‹', '').trim();
                navigator.clipboard.writeText(code).then(() => {
                    btn.innerHTML = 'âœ“';
                    setTimeout(() => btn.innerHTML = 'ğŸ“‹', 1000);
                });
            };
        });

        console.log('%cğŸ¬ UpscalePlayer Architecture', 'font-size: 24px; font-weight: bold; color: #6366f1;');
        console.log('%cãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒæ­£å¸¸ã«èª­ã¿è¾¼ã¾ã‚Œã¾ã—ãŸ', 'font-size: 14px; color: #10b981;');
    </script>
</body>
</html>
